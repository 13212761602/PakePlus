var G=Object.defineProperty;var E=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(d,i,t)=>i in d?G(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t,D=(d,i)=>{for(var t in i||(i={}))L.call(i,t)&&T(d,t,i[t]);if(E)for(var t of E(i))H.call(i,t)&&T(d,t,i[t]);return d};var k=(d,i,t)=>new Promise((P,w)=>{var M=s=>{try{f(t.next(s))}catch(g){w(g)}},l=s=>{try{f(t.throw(s))}catch(g){w(g)}},f=s=>s.done?P(s.value):Promise.resolve(s.value).then(M,l);f((t=t.apply(d,i)).next())});import{aq as v,al as I}from"./bootstrap-CbEyMBZc.js";import{v as J}from"./vxe-table-5UTMlFMN.js";import{d as K,e as O,f as Q}from"./index-DPCczbzV.js";import{c as U}from"./download-BL_xY_mD.js";import{_ as X}from"./autoCodePart-modal.vue_vue_type_script_setup_true_lang-BVcAHS4a.js";import{_ as Y}from"./autoCodePart-view-modal.vue_vue_type_script_setup_true_lang-CVeGBxeP.js";import{q as Z,c as ee}from"./data-Cc55b18P.js";import x from"./index-Yd03BW_o.js";import{_ as oe}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as te,l as R,V as ae,c as ne,h as _,o as u,a as n,w as o,b as a,k as m,t as p,F as ie,W as $}from"../jse/index-index-CKHiV3bJ.js";import{u as re}from"./use-vxe-grid-jJsowVf7.js";import{u as F}from"./use-modal-BtBQhM0d.js";import{P as N}from"./index-Bf3KtG2n.js";import{g as z}from"./get-popup-container-P4S1sr5h.js";const be=te({__name:"index",props:{embeddedMode:{type:Boolean,default:!1},searchParams:{default:()=>({})}},setup(d,{expose:i}){const t=d,P={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:Z(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},w={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:ee,height:t.embeddedMode?400:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(C,...y)=>k(null,[C,...y],function*({page:e},r={}){return yield K(D(D({pageNum:e.currentPage,pageSize:e.pageSize},r),t.searchParams))})}},rowConfig:{keyField:"id"},id:"system-autoCodePart-index"},[M,l]=re({formOptions:t.embeddedMode?void 0:P,gridOptions:w}),[f,s]=F({connectedComponent:X}),[g,q]=F({connectedComponent:Y});function V(){s.setData(t.searchParams),s.open()}function A(e){return k(this,null,function*(){q.setData({id:e.id}),q.open()})}function S(e){return k(this,null,function*(){s.setData({id:e.id}),s.open()})}function B(e){return k(this,null,function*(){yield O(e.id),yield l.query()})}function W(){const r=l.grid.getCheckboxRecords().map(C=>C.id);I.confirm({title:"提示",okType:"danger",content:`确认删除选中的${r.length}条记录吗？`,onOk:()=>k(null,null,function*(){yield O(r),yield l.query()})})}function j(){U(Q,"编码生成规则组成数据",l.formApi.form.values,{fieldMappingTime:P.fieldMappingTime})}return i({reload:l.query}),(e,r)=>{const C=R("a-button"),y=R("ghost-button"),h=ae("access");return e.embeddedMode?(u(),ne(ie,{key:0},[n(a(M),null,{"toolbar-tools":o(()=>[n(a(x),null,{default:o(()=>[n(C,{type:"primary",onClick:V},{default:o(()=>[m(p(e.$t("pages.common.add")),1)]),_:1})]),_:1})]),action:o(({row:c})=>[n(a(x),null,{default:o(()=>[n(y,{onClick:v(b=>A(c),["stop"])},{default:o(()=>[m(p(e.$t("pages.common.view")),1)]),_:2},1032,["onClick"]),n(y,{onClick:v(b=>S(c),["stop"])},{default:o(()=>[m(p(e.$t("pages.common.edit")),1)]),_:2},1032,["onClick"]),n(a(N),{"get-popup-container":a(z),placement:"left",title:"确认删除？",onConfirm:b=>B(c)},{default:o(()=>[n(y,{danger:"",onClick:r[0]||(r[0]=v(()=>{},["stop"]))},{default:o(()=>[m(p(e.$t("pages.common.delete")),1)]),_:1})]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),n(a(f),{onReload:r[1]||(r[1]=c=>a(l).query())}),n(a(g))],64)):(u(),_(a(oe),{key:1,"auto-content-height":!0},{default:o(()=>[n(a(M),{"table-title":"编码生成规则组成列表"},{"toolbar-tools":o(()=>[n(a(x),null,{default:o(()=>[$((u(),_(C,{onClick:j},{default:o(()=>[m(p(e.$t("pages.common.export")),1)]),_:1})),[[h,["system:autoCodePart:export"],"code"]]),$((u(),_(C,{disabled:!a(J)(a(l)),danger:"",type:"primary",onClick:W},{default:o(()=>[m(p(e.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[h,["system:autoCodePart:remove"],"code"]]),$((u(),_(C,{type:"primary",onClick:V},{default:o(()=>[m(p(e.$t("pages.common.add")),1)]),_:1})),[[h,["system:autoCodePart:add"],"code"]])]),_:1})]),action:o(({row:c})=>[n(a(x),null,{default:o(()=>[n(y,{onClick:v(b=>A(c),["stop"])},{default:o(()=>[m(p(e.$t("pages.common.view")),1)]),_:2},1032,["onClick"]),$((u(),_(y,{onClick:v(b=>S(c),["stop"])},{default:o(()=>[m(p(e.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[h,["system:autoCodePart:edit"],"code"]]),n(a(N),{"get-popup-container":a(z),placement:"left",title:"确认删除？",onConfirm:b=>B(c)},{default:o(()=>[$((u(),_(y,{danger:"",onClick:r[2]||(r[2]=v(()=>{},["stop"]))},{default:o(()=>[m(p(e.$t("pages.common.delete")),1)]),_:1})),[[h,["system:autoCodePart:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),n(a(f),{onReload:r[3]||(r[3]=c=>a(l).query())}),n(a(g))]),_:1}))}}});export{be as _};
