var j=Object.defineProperty;var S=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var Y=(m,e,o)=>e in m?j(m,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[e]=o,T=(m,e)=>{for(var o in e||(e={}))G.call(e,o)&&Y(m,o,e[o]);if(S)for(var o of S(e))H.call(e,o)&&Y(m,o,e[o]);return m};var g=(m,e,o)=>new Promise((D,r)=>{var k=n=>{try{y(o.next(n))}catch(b){r(b)}},v=n=>{try{y(o.throw(n))}catch(b){r(b)}},y=n=>n.done?D(n.value):Promise.resolve(n.value).then(k,v);y((o=o.apply(m,e)).next())});import{aq as x,al as J}from"./bootstrap-CbEyMBZc.js";import{v as K,a as Q}from"./vxe-table-5UTMlFMN.js";import{c as X,e as E,f as Z}from"./index-CU1tYpZa.js";import{c as oo}from"./download-BL_xY_mD.js";import{c as eo,q as M}from"./data-xOwsLIQf.js";import{_ as to}from"./demo-modal.vue_vue_type_script_setup_true_lang-Csyfj676.js";import{_ as io}from"./demo-view-modal.vue_vue_type_script_setup_true_lang-DmNDIEMf.js";import{u as ao,_ as no}from"./useFieldConfig-CEaS09tt.js";import P from"./index-Yd03BW_o.js";import{g as ro}from"./get-popup-container-P4S1sr5h.js";import{F as mo}from"./FilterOutlined-Dm1qpLE1.js";import{_ as po}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as so,l as O,V as lo,h as c,o as f,w as a,a as d,b as i,W as C,k as _,t as h}from"../jse/index-index-CKHiV3bJ.js";import{u as co}from"./use-vxe-grid-jJsowVf7.js";import{u as $}from"./use-modal-BtBQhM0d.js";import{P as fo}from"./index-Bf3KtG2n.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./vuedraggable.umd-Cwsj9bYW.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const F="demo-demo-index",me=so({__name:"index",setup(m){const e={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:M(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["applyDate",["params[beginApplyDate]","params[endApplyDate]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:eo,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(w,...u)=>g(null,[w,...u],function*({page:t,sorts:p},s={}){const l=T({pageNum:t.currentPage,pageSize:t.pageSize},s);return Q(l,p),yield X(l)})}},rowConfig:{keyField:"id"},sortConfig:{remote:!0,multiple:!1},id:F},[D,r]=co({formOptions:e,gridOptions:o,gridEvents:{sortChange:()=>r.query()}}),{initFormConfig:k,updateFieldConfig:v}=ao({tableId:F,getOriginalSchema:M,formOptions:e,tableApi:r});k();const[y,n]=$({connectedComponent:to}),[b,A]=$({connectedComponent:io}),[B,V]=$({connectedComponent:no});function N(){V.setData({}),V.open()}function R(){n.setData({}),n.open()}function z(t){return g(this,null,function*(){A.setData({id:t.id}),A.open()})}function I(t){return g(this,null,function*(){n.setData({id:t.id}),n.open()})}function L(t){return g(this,null,function*(){yield E(t.id),yield r.query()})}function U(){const p=r.grid.getCheckboxRecords().map(s=>s.id);J.confirm({title:"提示",okType:"danger",content:`确认删除选中的${p.length}条记录吗？`,onOk:()=>g(null,null,function*(){yield E(p),yield r.query()})})}function W(){oo(Z,"测试单数据",r.formApi.form.values,{fieldMappingTime:e.fieldMappingTime})}return(t,p)=>{const s=O("a-button"),w=O("ghost-button"),u=lo("access");return f(),c(i(po),{"auto-content-height":!0},{default:a(()=>[d(i(D),{"table-title":"测试单列表"},{"expand-before":a(()=>[d(s,{type:"text",onClick:N},{default:a(()=>[d(i(mo))]),_:1})]),"toolbar-tools":a(()=>[d(i(P),null,{default:a(()=>[C((f(),c(s,{onClick:W},{default:a(()=>[_(h(t.$t("pages.common.export")),1)]),_:1})),[[u,["demo:demo:export"],"code"]]),C((f(),c(s,{disabled:!i(K)(i(r)),danger:"",type:"primary",onClick:U},{default:a(()=>[_(h(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[u,["demo:demo:remove"],"code"]]),C((f(),c(s,{type:"primary",onClick:R},{default:a(()=>[_(h(t.$t("pages.common.add")),1)]),_:1})),[[u,["demo:demo:add"],"code"]])]),_:1})]),action:a(({row:l})=>[d(i(P),null,{default:a(()=>[C((f(),c(w,{onClick:x(q=>z(l),["stop"])},{default:a(()=>[_(h(t.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[u,["demo:demo:view"],"code"]]),C((f(),c(w,{onClick:x(q=>I(l),["stop"])},{default:a(()=>[_(h(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[u,["demo:demo:edit"],"code"]]),d(i(fo),{"get-popup-container":i(ro),placement:"left",title:"确认删除？",onConfirm:q=>L(l)},{default:a(()=>[C((f(),c(w,{danger:"",onClick:p[0]||(p[0]=x(()=>{},["stop"]))},{default:a(()=>[_(h(t.$t("pages.common.delete")),1)]),_:1})),[[u,["demo:demo:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),d(i(y),{onReload:p[1]||(p[1]=l=>i(r).query())}),d(i(b)),d(i(B),{"table-id":F,schema:i(M)(),onUpdateFieldConfig:i(v)},null,8,["schema","onUpdateFieldConfig"])]),_:1})}}});export{me as default};
