var R=Object.defineProperty;var $=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var q=(r,o,e)=>o in r?R(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,S=(r,o)=>{for(var e in o||(o={}))N.call(o,e)&&q(r,e,o[e]);if($)for(var e of $(o))T.call(o,e)&&q(r,e,o[e]);return r};var C=(r,o,e)=>new Promise((x,s)=>{var w=p=>{try{f(e.next(p))}catch(g){s(g)}},l=p=>{try{f(e.throw(p))}catch(g){s(g)}},f=p=>p.done?x(p.value):Promise.resolve(p.value).then(w,l);f((e=e.apply(r,o)).next())});import{bl as z,aq as V,al as U}from"./bootstrap-CbEyMBZc.js";import{v as W}from"./vxe-table-5UTMlFMN.js";import{q as j,c as F,a as G,b as L,d as H,e as A,f as I}from"./client-drawer-DZ-EXMB7.js";import"./vuedraggable.umd-Cwsj9bYW.js";import{_ as J}from"./table-switch.vue_vue_type_script_setup_true_lang-DjGnwzfb.js";import{c as K}from"./download-BL_xY_mD.js";import P from"./index-Yd03BW_o.js";import{_ as Q}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as X,l as B,V as Y,h as d,o as c,w as a,a as u,b as i,W as b,k as v,t as _}from"../jse/index-index-CKHiV3bJ.js";import{u as Z}from"./use-vxe-grid-jJsowVf7.js";import{u as ee}from"./use-drawer-ZsTa9Rf6.js";import{P as te}from"./index-Bf3KtG2n.js";import{g as oe}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./popup-DepLi2Z4.js";import"./dict-LWP2femj.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./index-BQy1gs98.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./secret-input-Dm4d0tC0.js";import"./index-Bo5G3-h7.js";import"./Search-BSSOOXXu.js";import"./statusUtils-BVmAuBuf.js";import"./BaseInput-B-KbMaIq.js";import"./index-CWS-moKy.js";import"./SearchOutlined-wPvswOvm.js";import"./index-B4Ee8RY3.js";import"./uuid-B0AYzFfo.js";import"./index-CzyoVQCf.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Je=X({__name:"index",setup(r){const o={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:j(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},e={checkboxConfig:{highlight:!0,reserve:!0,checkMethod:({row:t})=>(t==null?void 0:t.id)!==1},columns:F,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(h,...D)=>C(null,[h,...D],function*({page:t},n={}){return yield H(S({pageNum:t.currentPage,pageSize:t.pageSize},n))})}},rowConfig:{keyField:"id"},id:"system-client-index",showOverflow:!1},[x,s]=Z({formOptions:o,gridOptions:e}),[w,l]=ee({connectedComponent:G});function f(){l.setData({}),l.open()}function p(t){return C(this,null,function*(){l.setData({id:t.id}),l.open()})}function g(t){return C(this,null,function*(){yield A([t.id]),yield s.query()})}function E(){const n=s.grid.getCheckboxRecords().map(h=>h.id);U.confirm({title:"提示",okType:"danger",content:`确认删除选中的${n.length}条记录吗？`,onOk:()=>C(null,null,function*(){yield A(n),yield s.query()})})}function M(){K(I,"客户端数据",s.formApi.form.values)}const{hasAccessByCodes:O}=z();return(t,n)=>{const h=B("a-button"),D=B("ghost-button"),y=Y("access");return c(),d(i(Q),{"auto-content-height":!0},{default:a(()=>[u(i(x),{"table-title":"客户端列表"},{"toolbar-tools":a(()=>[u(i(P),null,{default:a(()=>[b((c(),d(h,{onClick:M},{default:a(()=>[v(_(t.$t("pages.common.export")),1)]),_:1})),[[y,["system:client:export"],"code"]]),b((c(),d(h,{disabled:!i(W)(i(s)),danger:"",type:"primary",onClick:E},{default:a(()=>[v(_(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:client:remove"],"code"]]),b((c(),d(h,{type:"primary",onClick:f},{default:a(()=>[v(_(t.$t("pages.common.add")),1)]),_:1})),[[y,["system:client:add"],"code"]])]),_:1})]),status:a(({row:m})=>[u(i(J),{value:m.status,"onUpdate:value":k=>m.status=k,api:()=>i(L)(m),disabled:m.id===1||!i(O)(["system:client:edit"]),onReload:n[0]||(n[0]=k=>i(s).query())},null,8,["value","onUpdate:value","api","disabled"])]),action:a(({row:m})=>[u(i(P),null,{default:a(()=>[b((c(),d(D,{onClick:V(k=>p(m),["stop"])},{default:a(()=>[v(_(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:client:edit"],"code"]]),u(i(te),{disabled:m.id===1,"get-popup-container":i(oe),placement:"left",title:"确认删除？",onConfirm:k=>g(m)},{default:a(()=>[b((c(),d(D,{disabled:m.id===1,danger:"",onClick:n[1]||(n[1]=V(()=>{},["stop"]))},{default:a(()=>[v(_(t.$t("pages.common.delete")),1)]),_:2},1032,["disabled"])),[[y,["system:client:remove"],"code"]])]),_:2},1032,["disabled","get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),u(i(w),{onReload:n[2]||(n[2]=m=>i(s).query())})]),_:1})}}});export{Je as default};
