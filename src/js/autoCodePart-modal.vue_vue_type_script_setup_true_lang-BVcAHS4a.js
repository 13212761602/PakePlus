var i=(u,m,t)=>new Promise((s,c)=>{var d=a=>{try{n(t.next(a))}catch(r){c(r)}},e=a=>{try{n(t.throw(a))}catch(r){c(r)}},n=a=>a.done?s(a.value):Promise.resolve(a.value).then(d,e);n((t=t.apply(u,m)).next())});import{$ as w}from"./bootstrap-CbEyMBZc.js";import{u as h}from"./form-DcAycvJX.js";import{a as _,b as v,c as B}from"./index-DPCczbzV.js";import{m as V}from"./data-Cc55b18P.js";import{d as b,p as y,B as P,S as x,h as A,o as L,b as C,w as k,a as D}from"../jse/index-index-CKHiV3bJ.js";import{u as F}from"./use-modal-BtBQhM0d.js";const W=b({__name:"autoCodePart-modal",emits:["reload"],setup(u,{emit:m}){const t=m,s=y(!1),c=P(()=>s.value?w("pages.common.edit"):w("pages.common.add")),[d,e]=h({commonConfig:{formItemClass:"col-span-2",labelWidth:80,componentProps:{class:"w-full"}},schema:V(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[n,a]=F({fullscreenButton:!1,onCancel:f,onConfirm:r,onOpenChange:l=>i(null,null,function*(){if(!l)return null;a.modalLoading(!0);const{id:o,ruleId:p}=a.getData();if(s.value=!!o,s.value&&o){const g=yield _(o);yield e.setValues(g)}else p&&(yield e.setValues({ruleId:p}));a.modalLoading(!1)})});function r(){return i(this,null,function*(){try{a.modalLoading(!0);const{valid:l}=yield e.validate();if(!l)return;const o=x(yield e.getValues());yield s.value?v(o):B(o),t("reload"),yield f()}catch(l){console.error(l)}finally{a.modalLoading(!1)}})}function f(){return i(this,null,function*(){a.close(),yield e.resetForm()})}return(l,o)=>(L(),A(C(n),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:k(()=>[D(C(d))]),_:1},8,["title"]))}});export{W as _};
