var j=Object.defineProperty;var q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(m,e,o)=>e in m?j(m,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[e]=o,Y=(m,e)=>{for(var o in e||(e={}))G.call(e,o)&&P(m,o,e[o]);if(q)for(var o of q(e))H.call(e,o)&&P(m,o,e[o]);return m};var g=(m,e,o)=>new Promise((v,r)=>{var w=a=>{try{b(o.next(a))}catch(k){r(k)}},y=a=>{try{b(o.throw(a))}catch(k){r(k)}},b=a=>a.done?v(a.value):Promise.resolve(a.value).then(w,y);b((o=o.apply(m,e)).next())});import{aq as x,al as J}from"./bootstrap-CbEyMBZc.js";import{v as K,a as Q}from"./vxe-table-5UTMlFMN.js";import{c as X,q as D,e as Z,f as A,g as oo}from"./data-doifuW3Q.js";import{u as eo,_ as to}from"./useFieldConfig-CEaS09tt.js";import{c as io}from"./download-BL_xY_mD.js";import{_ as no}from"./proSolution-modal.vue_vue_type_script_setup_true_lang-BvAzd83I.js";import{_ as ao}from"./proSolution-view-modal.vue_vue_type_script_setup_true_lang-Ce4uBqlO.js";import E from"./index-Yd03BW_o.js";import{F as ro}from"./FilterOutlined-Dm1qpLE1.js";import{_ as mo}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as po,l as O,V as so,h as c,o as u,w as n,a as s,b as i,W as C,k as _,t as h}from"../jse/index-index-CKHiV3bJ.js";import{u as lo}from"./use-vxe-grid-jJsowVf7.js";import{u as M}from"./use-modal-BtBQhM0d.js";import{P as co}from"./index-Bf3KtG2n.js";import{g as uo}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./useSysUserSelect-F1t7eIpS.js";import"./index-CoycSe17.js";import"./vuedraggable.umd-Cwsj9bYW.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const $="mes-proSolution-index",pe=po({__name:"index",setup(m){const e={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:D(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["formulationTime",["params[beginFormulationTime]","params[endFormulationTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:X,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(S,...f)=>g(null,[S,...f],function*({page:t,sorts:p},l={}){const d=Y({pageNum:t.currentPage,pageSize:t.pageSize},l);return Q(d,p),yield Z(d)})}},rowConfig:{keyField:"id"},sortConfig:{remote:!0,multiple:!1},id:$},[v,r]=lo({formOptions:e,gridOptions:o,gridEvents:{sortChange:()=>r.query()}}),{initFormConfig:w,updateFieldConfig:y}=eo({tableId:$,getOriginalSchema:D,formOptions:e,tableApi:r});w();const[b,a]=M({connectedComponent:no}),[k,F]=M({connectedComponent:ao}),[B,T]=M({connectedComponent:to});function N(){T.setData({}),T.open()}function R(){a.setData({}),a.open()}function z(t){return g(this,null,function*(){F.setData({id:t.id}),F.open()})}function I(t){return g(this,null,function*(){a.setData({id:t.id}),a.open()})}function L(t){return g(this,null,function*(){yield A(t.id),yield r.query()})}function U(){const p=r.grid.getCheckboxRecords().map(l=>l.id);J.confirm({title:"提示",okType:"danger",content:`确认删除选中的${p.length}条记录吗？`,onOk:()=>g(null,null,function*(){yield A(p),yield r.query()})})}function W(){io(oo,"生产异常解决方案数据",r.formApi.form.values,{fieldMappingTime:e.fieldMappingTime})}return(t,p)=>{const l=O("a-button"),S=O("ghost-button"),f=so("access");return u(),c(i(mo),{"auto-content-height":!0},{default:n(()=>[s(i(v),{"table-title":"生产异常解决方案列表"},{"expand-before":n(()=>[s(l,{type:"text",onClick:N},{default:n(()=>[s(i(ro))]),_:1})]),"toolbar-tools":n(()=>[s(i(E),null,{default:n(()=>[C((u(),c(l,{onClick:W},{default:n(()=>[_(h(t.$t("pages.common.export")),1)]),_:1})),[[f,["mes:proSolution:export"],"code"]]),C((u(),c(l,{disabled:!i(K)(i(r)),danger:"",type:"primary",onClick:U},{default:n(()=>[_(h(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[f,["mes:proSolution:remove"],"code"]]),C((u(),c(l,{type:"primary",onClick:R},{default:n(()=>[_(h(t.$t("pages.common.add")),1)]),_:1})),[[f,["mes:proSolution:add"],"code"]])]),_:1})]),action:n(({row:d})=>[s(i(E),null,{default:n(()=>[C((u(),c(S,{onClick:x(V=>z(d),["stop"])},{default:n(()=>[_(h(t.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[f,["mes:proSolution:view"],"code"]]),C((u(),c(S,{onClick:x(V=>I(d),["stop"])},{default:n(()=>[_(h(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[f,["mes:proSolution:edit"],"code"]]),s(i(co),{"get-popup-container":i(uo),placement:"left",title:"确认删除？",onConfirm:V=>L(d)},{default:n(()=>[C((u(),c(S,{danger:"",onClick:p[0]||(p[0]=x(()=>{},["stop"]))},{default:n(()=>[_(h(t.$t("pages.common.delete")),1)]),_:1})),[[f,["mes:proSolution:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),s(i(b),{onReload:p[1]||(p[1]=d=>i(r).query())}),s(i(k)),s(i(B),{"table-id":$,schema:i(D)(),onUpdateFieldConfig:i(y)},null,8,["schema","onUpdateFieldConfig"])]),_:1})}}});export{pe as default};
