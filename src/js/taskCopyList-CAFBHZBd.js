var K=Object.defineProperty,Q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var $=(n,i,o)=>i in n?K(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o,_=(n,i)=>{for(var o in i||(i={}))X.call(i,o)&&$(n,o,i[o]);if(U)for(var o of U(i))Y.call(i,o)&&$(n,o,i[o]);return n},h=(n,i)=>Q(n,W(i));var x=(n,i,o)=>new Promise((g,v)=>{var c=m=>{try{r(o.next(m))}catch(b){v(b)}},C=m=>{try{r(o.throw(m))}catch(b){v(b)}},r=m=>m.done?g(m.value):Promise.resolve(m.value).then(c,C);r((o=o.apply(n,i)).next())});import{c as Z}from"./index-B9jrj9-y.js";import{p as D}from"./index-BCokd8-c.js";import"./form-DcAycvJX.js";import ee from"./approval-card-CeGknLmO.js";import{_ as te}from"./approval-panel.vue_vue_type_script_setup_true_lang-B1awm_pt.js";import{ar as O,as as P,bF as oe,T as ae,ao as le,bn as w,z as re}from"./bootstrap-CbEyMBZc.js";import{_ as ie}from"./copy-component.vue_vue_type_script_setup_true_lang-9yx0-G2y.js";import"./vxe-table-5UTMlFMN.js";/* empty css                                                          */import{b as se,R as pe}from"./constant-D_D1w-m3.js";import{F as ne}from"./FilterOutlined-Dm1qpLE1.js";import"./index-Bo5G3-h7.js";import{a as ue,I as j}from"./Search-BSSOOXXu.js";import{S as me}from"./index-BQy1gs98.js";import{_ as de}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as fe,p as d,B as ve,E as ce,v as z,l as ge,h as F,o as y,w as s,j as f,a as l,b as a,k as V,c as B,f as M,F as be,O as ye,t as ke}from"../jse/index-index-CKHiV3bJ.js";import{a as _e}from"./tree-DFBawhPd.js";import{P as xe}from"./index-7E7RpNGb.js";import{a as A}from"./get-popup-container-P4S1sr5h.js";import we from"./index-CDs9hzWx.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./dict-LWP2femj.js";import"./helper-CgBacOxF.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./approval-card.vue_vue_type_style_index_0_scoped_90981e93_lang-CFyUrHXN.js";import"./relativeTime-C5B3Wg5z.js";import"./approval-content.vue_vue_type_script_setup_true_lang-JZv4tt6H.js";import"./index-vRRmcGk_.js";import"./avatar.vue_vue_type_script_setup_true_lang-CZ6M6Zo9.js";import"./statusUtils-BVmAuBuf.js";import"./BaseInput-B-KbMaIq.js";import"./css-Dmgy8YJo.js";import"./index-CWS-moKy.js";import"./SearchOutlined-wPvswOvm.js";import"./index-B4Ee8RY3.js";import"./index-BCj7hz3q.js";import"./approval-modal.vue_vue_type_script_setup_true_lang-r4oC-lZq.js";import"./use-modal-BtBQhM0d.js";import"./x-C_lPlK2i.js";import"./approval-details.vue_vue_type_script_setup_true_lang-CTP2jlly.js";import"./approval-timeline.vue_vue_type_script_setup_true_lang-CxoHRiMs.js";import"./approval-timeline-item.vue_vue_type_script_setup_true_lang-DbiUkk5H.js";import"./index-Bn5n5c2e.js";import"./index-DMCjRHjH.js";import"./user-select-modal-CF4g6nsp.js";import"./index-CoycSe17.js";import"./dept-tree.vue_vue_type_script_setup_true_lang-BEss8Sse.js";import"./SyncOutlined-CaKwXa3d.js";import"./index-DcmIf06E.js";import"./index-C2Ye5jbl.js";import"./List-CkKZPkf7.js";import"./eagerComputed-ClTeoNNc.js";import"./index-CKqqy29x.js";import"./use-vxe-grid-jJsowVf7.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./LeftOutlined-D2uSfO0F.js";import"./approval-rejection-modal.vue_vue_type_script_setup_true_lang-DB_t6bkD.js";import"./flow-interfere-modal.vue_vue_type_script_setup_true_lang-5N7VWWsA.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Yd03BW_o.js";import"./index-DWD1gEWB.js";import"./move-5_ATuUxE.js";import"./fallback.vue_vue_type_script_setup_true_lang-ChoFPR3D.js";import"./rotate-cw-D3jx6xYy.js";import"./index-CxSj1uA5.js";import"./useMemo-DU68JpYs.js";import"./index-C-6YIAWO.js";import"./DownOutlined-C0xNNL43.js";const Ce={class:"flex h-full gap-2"},Ne={class:"bg-background relative flex h-full min-w-[320px] max-w-[320px] flex-col rounded-lg"},Ie={class:"bg-background z-100 sticky left-0 top-0 w-full rounded-t-lg border-b-[1px] border-solid p-2"},Se={class:"flex items-center gap-1"},Te={class:"flex"},he={key:2,class:"flex items-center justify-center text-[14px] opacity-50"},Fe={key:3,class:"absolute left-0 top-0 flex h-full w-full items-center justify-center bg-[rgba(0,0,0,0.1)]"},Be={class:"bg-background sticky bottom-0 w-full rounded-b-lg border-t-[1px] py-2"},Ee={class:"flex items-center justify-center"},Le=fe({__name:"taskCopyList",setup(n){const i=O.PRESENTED_IMAGE_SIMPLE,o=d([]),g=d(0),v=d(1),c=d(!1),C={flowName:"",nodeName:"",flowCode:"",createByIds:[],category:null},r=d(P(C)),m=ve(()=>o.value.length===g.value),b=ce("cardContainerRef");function k(p=!1){return x(this,null,function*(){var u;(u=b.value)==null||u.scroll({top:0,behavior:"auto"}),v.value=1,N.value=void 0,g.value=0,T.value="",p&&(r.value=P(C),S.value=[]),c.value=!0;const e=yield D(_({pageSize:10,pageNum:v.value},r.value));if(o.value=e.rows.map(t=>h(_({},t),{active:!1})),g.value=e.total,c.value=!1,o.value.length>0){const t=o.value[0];N.value=t,L(t)}})}z(k);const E=oe(p=>x(null,null,function*(){if(!p.target)return;const{scrollTop:e,clientHeight:u,scrollHeight:t}=p.target;if(e+u>=t-se&&!m.value){c.value=!0,v.value+=1;const q=yield D(_({pageSize:10,pageNum:v.value},r.value));o.value.push(...q.rows.map(J=>h(_({},J),{active:!1}))),c.value=!1}}),200),T=d(""),N=d();function L(p){return x(this,null,function*(){const{id:e}=p;T.value!==e&&(N.value=p,o.value.forEach(u=>{u.active=u.id===e}),T.value=e)})}const I=d(!1),S=d([]);function H(p){I.value=!0,S.value=p,r.value.createByIds=p.map(e=>e.userId)}const R=d([]);return z(()=>x(null,null,function*(){const p=yield Z();_e(p,"label"," / "),R.value=p})),(p,e)=>{const u=ge("a-button");return y(),F(a(de),{"auto-content-height":!0},{default:s(()=>[f("div",Ce,[f("div",Ne,[f("div",Ie,[f("div",Se,[l(a(ue),{value:r.value.flowName,"onUpdate:value":e[0]||(e[0]=t=>r.value.flowName=t),placeholder:"流程名称搜索",onSearch:e[1]||(e[1]=t=>k(!1))},null,8,["value"]),l(a(ae),{placement:"top",title:"重置"},{default:s(()=>[l(u,{onClick:e[2]||(e[2]=t=>k(!0))},{default:s(()=>[l(a(pe))]),_:1})]),_:1}),l(a(xe),{open:I.value,"onUpdate:open":e[10]||(e[10]=t=>I.value=t),"get-popup-container":a(A),placement:"rightTop",trigger:"click"},{title:s(()=>e[12]||(e[12]=[f("div",{class:"w-full border-b pb-[12px] text-[16px]"},"搜索",-1)])),content:s(()=>[l(a(le),{colon:!1,"label-col":{span:6},model:r.value,autocomplete:"off",class:"w-[300px]",onFinish:e[9]||(e[9]=()=>k(!1))},{default:s(()=>[l(a(w),{label:"申请人"},{default:s(()=>[l(a(ie),{"user-list":S.value,"onUpdate:userList":e[3]||(e[3]=t=>S.value=t),onCancel:e[4]||(e[4]=()=>I.value=!0),onFinish:H},null,8,["user-list"])]),_:1}),l(a(w),{label:"流程分类"},{default:s(()=>[l(a(we),{value:r.value.category,"onUpdate:value":e[5]||(e[5]=t=>r.value.category=t),"allow-clear":!0,"field-names":{label:"label",value:"id"},"get-popup-container":a(A),"tree-data":R.value,"tree-default-expand-all":!0,"tree-line":{showLeafIcon:!1},placeholder:"请选择","tree-node-filter-prop":"label","tree-node-label-prop":"fullName"},null,8,["value","get-popup-container","tree-data"])]),_:1}),l(a(w),{label:"任务名称"},{default:s(()=>[l(a(j),{value:r.value.nodeName,"onUpdate:value":e[6]||(e[6]=t=>r.value.nodeName=t),placeholder:"请输入"},null,8,["value"])]),_:1}),l(a(w),{label:"流程编码"},{default:s(()=>[l(a(j),{value:r.value.flowCode,"onUpdate:value":e[7]||(e[7]=t=>r.value.flowCode=t),placeholder:"请输入"},null,8,["value"])]),_:1}),l(a(w),null,{default:s(()=>[f("div",Te,[l(u,{block:"","html-type":"submit",type:"primary"},{default:s(()=>e[13]||(e[13]=[V(" 搜索 ")])),_:1,__:[13]}),l(u,{block:"",class:"ml-2",onClick:e[8]||(e[8]=t=>k(!0))},{default:s(()=>e[14]||(e[14]=[V(" 重置 ")])),_:1,__:[14]})])]),_:1})]),_:1},8,["model"])]),default:s(()=>[l(u,null,{default:s(()=>[l(a(ne))]),_:1})]),_:1},8,["open","get-popup-container"])])]),f("div",{ref_key:"cardContainerRef",ref:b,class:"thin-scrollbar flex flex-1 flex-col gap-2 overflow-y-auto py-3",onScroll:e[11]||(e[11]=(...t)=>a(E)&&a(E)(...t))},[o.value.length>0?(y(!0),B(be,{key:0},ye(o.value,t=>(y(),F(a(ee),{key:t.id,info:t,class:"mx-2",onClick:G=>L(t)},null,8,["info","onClick"]))),128)):(y(),F(a(O),{key:1,image:a(i)},null,8,["image"])),m.value&&o.value.length>0?(y(),B("div",he," 没有更多数据了 ")):M("",!0),c.value?(y(),B("div",Fe,[l(a(me),{tip:"加载中..."})])):M("",!0)],544),f("div",Be,[f("div",Ee," 共 "+ke(g.value)+" 条记录 ",1)])]),l(a(te),{task:N.value,type:"readonly"},null,8,["task"])])]),_:1})}}}),fo=re(Le,[["__scopeId","data-v-20ace4f4"]]);export{fo as default};
