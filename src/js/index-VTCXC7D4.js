var R=Object.defineProperty;var D=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var V=(n,t,e)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,M=(n,t)=>{for(var e in t||(t={}))z.call(t,e)&&V(n,e,t[e]);if(D)for(var e of D(t))W.call(t,e)&&V(n,e,t[e]);return n};var u=(n,t,e)=>new Promise((k,s)=>{var v=r=>{try{_(e.next(r))}catch(h){s(h)}},c=r=>{try{_(e.throw(r))}catch(h){s(h)}},_=r=>r.done?k(r.value):Promise.resolve(r.value).then(v,c);_((e=e.apply(n,t)).next())});import{aq as $,al as j}from"./bootstrap-CbEyMBZc.js";import{d as G,l as q,V as L,h as p,o as l,w as i,a as f,b as a,W as g,k as b,t as C}from"../jse/index-index-CKHiV3bJ.js";import{v as H}from"./vxe-table-5UTMlFMN.js";import{e as I,q as J,f as K,g as S,h as Q}from"./data-MUe1_OS7.js";import{c as U}from"./download-BL_xY_mD.js";import{_ as X}from"./baseFile-modal.vue_vue_type_script_setup_true_lang-DM74JTVD.js";import{_ as Y}from"./baseFile-view-modal.vue_vue_type_script_setup_true_lang-BzBBHBMb.js";import A from"./index-Yd03BW_o.js";import{_ as Z}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{u as ee}from"./use-vxe-grid-jJsowVf7.js";import{u as B}from"./use-modal-BtBQhM0d.js";import{P as oe}from"./index-Bf3KtG2n.js";import{g as te}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Ge=G({__name:"index",setup(n){const t={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:J(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},e={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:I,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(y,...x)=>u(null,[y,...x],function*({page:o},m={}){return yield K(M({pageNum:o.currentPage,pageSize:o.pageSize},m))})}},rowConfig:{keyField:"id"},id:"system-baseFile-index"},[k,s]=ee({formOptions:t,gridOptions:e}),[v,c]=B({connectedComponent:X}),[_,r]=B({connectedComponent:Y});function h(){c.setData({}),c.open()}function P(o){return u(this,null,function*(){r.setData({id:o.id}),r.open()})}function T(o){return u(this,null,function*(){c.setData({id:o.id}),c.open()})}function E(o){return u(this,null,function*(){yield S(o.id),yield s.query()})}function N(){const m=s.grid.getCheckboxRecords().map(y=>y.id);j.confirm({title:"提示",okType:"danger",content:`确认删除选中的${m.length}条记录吗？`,onOk:()=>u(null,null,function*(){yield S(m),yield s.query()})})}function O(){U(Q,"系统附件数据",s.formApi.form.values,{fieldMappingTime:t.fieldMappingTime})}return(o,m)=>{const y=q("a-button"),x=q("ghost-button"),d=L("access");return l(),p(a(Z),{"auto-content-height":!0},{default:i(()=>[f(a(k),{"table-title":"系统附件列表"},{"toolbar-tools":i(()=>[f(a(A),null,{default:i(()=>[g((l(),p(y,{onClick:O},{default:i(()=>[b(C(o.$t("pages.common.export")),1)]),_:1})),[[d,["system:baseFile:export"],"code"]]),g((l(),p(y,{disabled:!a(H)(a(s)),danger:"",type:"primary",onClick:N},{default:i(()=>[b(C(o.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[d,["system:baseFile:remove"],"code"]]),g((l(),p(y,{type:"primary",onClick:h},{default:i(()=>[b(C(o.$t("pages.common.add")),1)]),_:1})),[[d,["system:baseFile:add"],"code"]])]),_:1})]),action:i(({row:w})=>[f(a(A),null,{default:i(()=>[g((l(),p(x,{onClick:$(F=>P(w),["stop"])},{default:i(()=>[b(C(o.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[d,["system:baseFile:view"],"code"]]),g((l(),p(x,{onClick:$(F=>T(w),["stop"])},{default:i(()=>[b(C(o.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[d,["system:baseFile:edit"],"code"]]),f(a(oe),{"get-popup-container":a(te),placement:"left",title:"确认删除？",onConfirm:F=>E(w)},{default:i(()=>[g((l(),p(x,{danger:"",onClick:m[0]||(m[0]=$(()=>{},["stop"]))},{default:i(()=>[b(C(o.$t("pages.common.delete")),1)]),_:1})),[[d,["system:baseFile:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),f(a(v),{onReload:m[1]||(m[1]=w=>a(s).query())}),f(a(_))]),_:1})}}});export{Ge as default};
