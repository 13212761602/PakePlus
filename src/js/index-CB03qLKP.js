var O=Object.defineProperty;var D=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var q=(i,e,o)=>e in i?O(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,S=(i,e)=>{for(var o in e||(e={}))R.call(e,o)&&q(i,o,e[o]);if(D)for(var o of D(e))M.call(e,o)&&q(i,o,e[o]);return i};var f=(i,e,o)=>new Promise((w,r)=>{var x=m=>{try{c(o.next(m))}catch(u){r(u)}},d=m=>{try{c(o.throw(m))}catch(u){r(u)}},c=m=>m.done?w(m.value):Promise.resolve(m.value).then(x,d);c((o=o.apply(i,e)).next())});import{bl as N,aq as T,al as z}from"./bootstrap-CbEyMBZc.js";import{v as U}from"./vxe-table-5UTMlFMN.js";import{q as W,c as j,o as E,a as F,b as G,d as V}from"./oss-config-drawer-Xnp3j2WN.js";import"./vuedraggable.umd-Cwsj9bYW.js";import{_ as L}from"./table-switch.vue_vue_type_script_setup_true_lang-DjGnwzfb.js";import A from"./index-Yd03BW_o.js";import{_ as H}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as J,l as P,V as K,h as g,o as C,w as n,a as l,b as t,W as _,k as v,t as k}from"../jse/index-index-CKHiV3bJ.js";import{u as Q}from"./use-vxe-grid-jJsowVf7.js";import{u as X}from"./use-drawer-ZsTa9Rf6.js";import{P as Y}from"./index-Bf3KtG2n.js";import{g as Z}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./popup-DepLi2Z4.js";import"./dict-LWP2femj.js";import"./helper-CgBacOxF.js";import"./index-D7oCs85i.js";import"./index-B1E3W4TM.js";import"./index-CzyoVQCf.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Po=J({__name:"index",setup(i){const e={schema:W(),commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={checkboxConfig:{highlight:!0,reserve:!0},columns:j,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(y,...$)=>f(null,[y,...$],function*({page:s},a={}){return yield G(S({pageNum:s.currentPage,pageSize:s.pageSize},a))})}},rowConfig:{keyField:"ossConfigId"},id:"system-oss-config-index"},[w,r]=Q({formOptions:e,gridOptions:o}),[x,d]=X({connectedComponent:E});function c(){d.setData({}),d.open()}function m(s){return f(this,null,function*(){d.setData({id:s.ossConfigId}),d.open()})}function u(s){return f(this,null,function*(){yield V([s.ossConfigId]),yield r.query()})}function B(){const a=r.grid.getCheckboxRecords().map(y=>y.ossConfigId);z.confirm({title:"提示",okType:"danger",content:`确认删除选中的${a.length}条记录吗？`,onOk:()=>f(null,null,function*(){yield V(a),yield r.query()})})}const{hasAccessByCodes:I}=N();return(s,a)=>{const y=P("a-button"),$=P("ghost-button"),h=K("access");return C(),g(t(H),{"auto-content-height":!0},{default:n(()=>[l(t(w),{"table-title":"oss配置列表"},{"toolbar-tools":n(()=>[l(t(A),null,{default:n(()=>[_((C(),g(y,{disabled:!t(U)(t(r)),danger:"",type:"primary",onClick:B},{default:n(()=>[v(k(s.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[h,["system:ossConfig:remove"],"code"]]),_((C(),g(y,{type:"primary",onClick:c},{default:n(()=>[v(k(s.$t("pages.common.add")),1)]),_:1})),[[h,["system:ossConfig:add"],"code"]])]),_:1})]),status:n(({row:p})=>[l(t(L),{value:p.status,"onUpdate:value":b=>p.status=b,api:()=>t(F)(p),disabled:!t(I)(["system:ossConfig:edit"]),onReload:a[0]||(a[0]=b=>t(r).query())},null,8,["value","onUpdate:value","api","disabled"])]),action:n(({row:p})=>[l(t(A),null,{default:n(()=>[_((C(),g($,{onClick:b=>m(p)},{default:n(()=>[v(k(s.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[h,["system:ossConfig:edit"],"code"]]),l(t(Y),{"get-popup-container":t(Z),placement:"left",title:"确认删除？",onConfirm:b=>u(p)},{default:n(()=>[_((C(),g($,{danger:"",onClick:a[1]||(a[1]=T(()=>{},["stop"]))},{default:n(()=>[v(k(s.$t("pages.common.delete")),1)]),_:1})),[[h,["system:ossConfig:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),l(t(x),{onReload:a[2]||(a[2]=p=>t(r).query())})]),_:1})}}});export{Po as default};
