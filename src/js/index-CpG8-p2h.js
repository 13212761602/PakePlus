var j=Object.defineProperty;var q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(s,e,o)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,S=(s,e)=>{for(var o in e||(e={}))G.call(e,o)&&P(s,o,e[o]);if(q)for(var o of q(e))H.call(e,o)&&P(s,o,e[o]);return s};var g=(s,e,o)=>new Promise((b,r)=>{var k=n=>{try{_(o.next(n))}catch(h){r(h)}},v=n=>{try{_(o.throw(n))}catch(h){r(h)}},_=n=>n.done?b(n.value):Promise.resolve(n.value).then(k,v);_((o=o.apply(s,e)).next())});import{aq as x,al as J}from"./bootstrap-CbEyMBZc.js";import{v as K,a as Q}from"./vxe-table-5UTMlFMN.js";import{c as X,q as D,e as Z,f as Y,g as oo}from"./data-CoeBux6Z.js";import{u as eo,_ as to}from"./useFieldConfig-CEaS09tt.js";import{c as io}from"./download-BL_xY_mD.js";import{_ as ao}from"./proAnomalyAnalysis-modal.vue_vue_type_script_setup_true_lang-BdzoTX-d.js";import{_ as no}from"./proAnomalyAnalysis-view-modal.vue_vue_type_script_setup_true_lang-mhFKH550.js";import E from"./index-Yd03BW_o.js";import{F as ro}from"./FilterOutlined-Dm1qpLE1.js";import{_ as so}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as mo,l as O,V as lo,h as c,o as f,w as a,a as l,b as i,W as y,k as C,t as A}from"../jse/index-index-CKHiV3bJ.js";import{u as po}from"./use-vxe-grid-jJsowVf7.js";import{u as M}from"./use-modal-BtBQhM0d.js";import{P as co}from"./index-Bf3KtG2n.js";import{g as fo}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./vuedraggable.umd-Cwsj9bYW.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const $="mes-proAnomalyAnalysis-index",re=mo({__name:"index",setup(s){const e={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:D(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["analysisTime",["params[beginAnalysisTime]","params[endAnalysisTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:X,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(w,...u)=>g(null,[w,...u],function*({page:t,sorts:m},p={}){const d=S({pageNum:t.currentPage,pageSize:t.pageSize},p);return Q(d,m),yield Z(d)})}},rowConfig:{keyField:"id"},sortConfig:{remote:!0,multiple:!1},id:$},[b,r]=po({formOptions:e,gridOptions:o,gridEvents:{sortChange:()=>r.query()}}),{initFormConfig:k,updateFieldConfig:v}=eo({tableId:$,getOriginalSchema:D,formOptions:e,tableApi:r});k();const[_,n]=M({connectedComponent:ao}),[h,F]=M({connectedComponent:no}),[B,T]=M({connectedComponent:to});function N(){T.setData({}),T.open()}function R(){n.setData({}),n.open()}function z(t){return g(this,null,function*(){F.setData({id:t.id}),F.open()})}function I(t){return g(this,null,function*(){n.setData({id:t.id}),n.open()})}function L(t){return g(this,null,function*(){yield Y(t.id),yield r.query()})}function U(){const m=r.grid.getCheckboxRecords().map(p=>p.id);J.confirm({title:"提示",okType:"danger",content:`确认删除选中的${m.length}条记录吗？`,onOk:()=>g(null,null,function*(){yield Y(m),yield r.query()})})}function W(){io(oo,"生产异常分析数据",r.formApi.form.values,{fieldMappingTime:e.fieldMappingTime})}return(t,m)=>{const p=O("a-button"),w=O("ghost-button"),u=lo("access");return f(),c(i(so),{"auto-content-height":!0},{default:a(()=>[l(i(b),{"table-title":"生产异常分析列表"},{"expand-before":a(()=>[l(p,{type:"text",onClick:N},{default:a(()=>[l(i(ro))]),_:1})]),"toolbar-tools":a(()=>[l(i(E),null,{default:a(()=>[y((f(),c(p,{onClick:W},{default:a(()=>[C(A(t.$t("pages.common.export")),1)]),_:1})),[[u,["mes:proAnomalyAnalysis:export"],"code"]]),y((f(),c(p,{disabled:!i(K)(i(r)),danger:"",type:"primary",onClick:U},{default:a(()=>[C(A(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[u,["mes:proAnomalyAnalysis:remove"],"code"]]),y((f(),c(p,{type:"primary",onClick:R},{default:a(()=>[C(A(t.$t("pages.common.add")),1)]),_:1})),[[u,["mes:proAnomalyAnalysis:add"],"code"]])]),_:1})]),action:a(({row:d})=>[l(i(E),null,{default:a(()=>[y((f(),c(w,{onClick:x(V=>z(d),["stop"])},{default:a(()=>[C(A(t.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyAnalysis:view"],"code"]]),y((f(),c(w,{onClick:x(V=>I(d),["stop"])},{default:a(()=>[C(A(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyAnalysis:edit"],"code"]]),l(i(co),{"get-popup-container":i(fo),placement:"left",title:"确认删除？",onConfirm:V=>L(d)},{default:a(()=>[y((f(),c(w,{danger:"",onClick:m[0]||(m[0]=x(()=>{},["stop"]))},{default:a(()=>[C(A(t.$t("pages.common.delete")),1)]),_:1})),[[u,["mes:proAnomalyAnalysis:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),l(i(_),{onReload:m[1]||(m[1]=d=>i(r).query())}),l(i(h)),l(i(B),{"table-id":$,schema:i(D)(),onUpdateFieldConfig:i(v)},null,8,["schema","onUpdateFieldConfig"])]),_:1})}}});export{re as default};
