var i=(p,m,e)=>new Promise((s,c)=>{var d=a=>{try{l(e.next(a))}catch(r){c(r)}},n=a=>{try{l(e.throw(a))}catch(r){c(r)}},l=a=>a.done?s(a.value):Promise.resolve(a.value).then(d,n);l((e=e.apply(p,m)).next())});import{$ as u}from"./bootstrap-CbEyMBZc.js";import{u as h}from"./form-DcAycvJX.js";import{m as C,p as _,a as y,b as A}from"./data-e4sOGhYF.js";import{d as v,p as B,B as b,S as V,h as x,o as L,w as R,a as k,b as w}from"../jse/index-index-CKHiV3bJ.js";import{u as D}from"./use-modal-BtBQhM0d.js";const N=v({__name:"proAnomalyResponse-modal",emits:["reload"],setup(p,{emit:m}){const e=m,s=B(!1),c=b(()=>s.value?u("pages.common.edit"):u("pages.common.add")),[d,n]=h({commonConfig:{formItemClass:"col-span-2",labelWidth:80,componentProps:{class:"w-full"}},schema:C(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[l,a]=D({fullscreenButton:!1,onCancel:f,onConfirm:r,onOpenChange:t=>i(null,null,function*(){if(!t)return null;a.modalLoading(!0);const{id:o}=a.getData();if(s.value=!!o,s.value&&o){const g=yield _(o);yield n.setValues(g)}a.modalLoading(!1)})});function r(){return i(this,null,function*(){try{a.modalLoading(!0);const{valid:t}=yield n.validate();if(!t)return;const o=V(yield n.getValues());yield s.value?y(o):A(o),e("reload"),yield f()}catch(t){console.error(t)}finally{a.modalLoading(!1)}})}function f(){return i(this,null,function*(){a.close(),yield n.resetForm()})}return(t,o)=>(L(),x(w(l),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:R(()=>[k(w(d))]),_:1},8,["title"]))}});export{N as _};
