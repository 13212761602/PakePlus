var d=(u,m,o)=>new Promise((i,c)=>{var f=e=>{try{r(o.next(e))}catch(l){c(l)}},t=e=>{try{r(o.throw(e))}catch(l){c(l)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(f,t);r((o=o.apply(u,m)).next())});import{$ as p}from"./bootstrap-CbEyMBZc.js";import{u as C}from"./form-DcAycvJX.js";import{c as I,e as N,f as T}from"./dict-type-DToMJXi_.js";import{u as k,d as h}from"./popup-DepLi2Z4.js";import{a as v}from"./use-vben-form-CDDuv56b.js";import{d as B,p as x,B as V,S as z,h as F,o as A,w as D,a as q,b as y}from"../jse/index-index-CKHiV3bJ.js";import{u as G}from"./use-modal-BtBQhM0d.js";const H=()=>[{component:"Input",fieldName:"dictName",label:"字典名称"},{component:"Input",fieldName:"dictType",label:"字典类型"}],J=[{type:"checkbox",width:60},{title:"字典名称",field:"dictName"},{title:"字典类型",field:"dictType"},{title:"备注",field:"remark"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",resizable:!1,width:"auto"}],S=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"dictId",label:"dictId"},{component:"Input",fieldName:"dictName",label:"字典名称",rules:"required"},{component:"Input",fieldName:"dictType",help:"使用英文/下划线命名, 如:sys_normal_disable",label:"字典类型",rules:v().regex(/^[a-z_]+$/i,{message:"字典类型只能使用英文/下划线命名"})},{component:"Textarea",fieldName:"remark",label:"备注"}],K=B({__name:"dict-type-modal",emits:["reload"],setup(u,{emit:m}){const o=m,i=x(!1),c=V(()=>i.value?p("pages.common.edit"):p("pages.common.add")),[f,t]=C({layout:"vertical",commonConfig:{labelWidth:100},schema:S(),showDefaultActions:!1}),{onBeforeClose:r,markInitialized:e,resetInitialized:l}=k({initializedGetter:h(t),currentGetter:h(t)}),[g,n]=G({fullscreenButton:!1,onBeforeClose:r,onClosed:w,onConfirm:b,onOpenChange:s=>d(null,null,function*(){if(!s)return null;n.modalLoading(!0);const{id:a}=n.getData();if(i.value=!!a,i.value&&a){const _=yield I(a);yield t.setValues(_)}yield e(),n.modalLoading(!1)})});function b(){return d(this,null,function*(){try{n.lock(!0);const{valid:s}=yield t.validate();if(!s)return;const a=z(yield t.getValues());yield i.value?N(a):T(a),l(),o("reload"),n.close()}catch(s){console.error(s)}finally{n.lock(!1)}})}function w(){return d(this,null,function*(){yield t.resetForm(),l()})}return(s,a)=>(A(),F(y(g),{title:c.value},{default:D(()=>[q(y(f))]),_:1},8,["title"]))}});export{K as _,J as c,H as q};
