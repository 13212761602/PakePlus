var i=(u,m,o)=>new Promise((t,c)=>{var d=a=>{try{n(o.next(a))}catch(r){c(r)}},s=a=>{try{n(o.throw(a))}catch(r){c(r)}},n=a=>a.done?t(a.value):Promise.resolve(a.value).then(d,s);n((o=o.apply(u,m)).next())});import{$ as p}from"./bootstrap-CbEyMBZc.js";import{u as g}from"./form-DcAycvJX.js";import{m as h,a as _,b as v,c as B}from"./data-DtzB42qy.js";import{d as b,p as y,B as V,S as x,h as A,o as L,w as R,a as k,b as C}from"../jse/index-index-CKHiV3bJ.js";import{u as D}from"./use-modal-BtBQhM0d.js";const N=b({__name:"autoCodeResult-modal",emits:["reload"],setup(u,{emit:m}){const o=m,t=y(!1),c=V(()=>t.value?p("pages.common.edit"):p("pages.common.add")),[d,s]=g({commonConfig:{formItemClass:"col-span-2",labelWidth:80,componentProps:{class:"w-full"}},schema:h(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[n,a]=D({fullscreenButton:!1,onCancel:f,onConfirm:r,onOpenChange:l=>i(null,null,function*(){if(!l)return null;a.modalLoading(!0);const{id:e}=a.getData();if(t.value=!!e,t.value&&e){const w=yield _(e);yield s.setValues(w)}a.modalLoading(!1)})});function r(){return i(this,null,function*(){try{a.modalLoading(!0);const{valid:l}=yield s.validate();if(!l)return;const e=x(yield s.getValues());yield t.value?v(e):B(e),o("reload"),yield f()}catch(l){console.error(l)}finally{a.modalLoading(!1)}})}function f(){return i(this,null,function*(){a.close(),yield s.resetForm()})}return(l,e)=>(L(),A(C(n),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:R(()=>[k(C(d))]),_:1},8,["title"]))}});export{N as _};
