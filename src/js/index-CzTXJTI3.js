var E=Object.defineProperty;var D=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var M=(a,e,o)=>e in a?E(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,$=(a,e)=>{for(var o in e||(e={}))I.call(e,o)&&M(a,o,e[o]);if(D)for(var o of D(e))B.call(e,o)&&M(a,o,e[o]);return a};var l=(a,e,o)=>new Promise((k,r)=>{var w=m=>{try{C(o.next(m))}catch(h){r(h)}},p=m=>{try{C(o.throw(m))}catch(h){r(h)}},C=m=>m.done?k(m.value):Promise.resolve(m.value).then(w,p);C((o=o.apply(a,e)).next())});import{aq as T,al as N}from"./bootstrap-CbEyMBZc.js";import{v as O}from"./vxe-table-5UTMlFMN.js";import{d as z,e as q,f as W,g as j}from"./index-xDQdt43_.js";import{c as F}from"./download-BL_xY_mD.js";import{q as G,c as L,_ as H}from"./config-modal.vue_vue_type_script_setup_true_lang-B6qL7ghk.js";import Y from"./index-Yd03BW_o.js";import{_ as J}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as K,l as V,V as Q,h as d,o as f,w as i,a as g,b as s,W as _,k as u,t as b}from"../jse/index-index-CKHiV3bJ.js";import{u as U}from"./use-vxe-grid-jJsowVf7.js";import{u as X}from"./use-modal-BtBQhM0d.js";import{P as Z}from"./index-Bf3KtG2n.js";import{g as oo}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./popup-DepLi2Z4.js";import"./dict-LWP2femj.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./index-BQy1gs98.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Eo=K({__name:"index",setup(a){const e={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:G(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["createTime",["params[beginTime]","params[endTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},o={checkboxConfig:{highlight:!0,reserve:!0},columns:L,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(c,...x)=>l(null,[c,...x],function*({page:t},n={}){return yield z($({pageNum:t.currentPage,pageSize:t.pageSize},n))})}},rowConfig:{keyField:"configId"},id:"system-config-index"},[k,r]=U({formOptions:e,gridOptions:o}),[w,p]=X({connectedComponent:H});function C(){p.setData({}),p.open()}function m(t){return l(this,null,function*(){p.setData({id:t.configId}),p.open()})}function h(t){return l(this,null,function*(){yield q([t.configId]),yield r.query()})}function S(){const n=r.grid.getCheckboxRecords().map(c=>c.configId);N.confirm({title:"提示",okType:"danger",content:`确认删除选中的${n.length}条记录吗？`,onOk:()=>l(null,null,function*(){yield q(n),yield r.query()})})}function P(){F(W,"参数配置",r.formApi.form.values,{fieldMappingTime:e.fieldMappingTime})}function R(){return l(this,null,function*(){yield j(),yield r.query()})}return(t,n)=>{const c=V("a-button"),x=V("ghost-button"),y=Q("access");return f(),d(s(J),{"auto-content-height":!0},{default:i(()=>[g(s(k),{"table-title":"参数列表"},{"toolbar-tools":i(()=>[g(s(Y),null,{default:i(()=>[g(c,{onClick:R},{default:i(()=>n[2]||(n[2]=[u(" 刷新缓存 ")])),_:1,__:[2]}),_((f(),d(c,{onClick:P},{default:i(()=>[u(b(t.$t("pages.common.export")),1)]),_:1})),[[y,["system:config:export"],"code"]]),_((f(),d(c,{disabled:!s(O)(s(r)),danger:"",type:"primary",onClick:S},{default:i(()=>[u(b(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:config:remove"],"code"]]),_((f(),d(c,{type:"primary",onClick:C},{default:i(()=>[u(b(t.$t("pages.common.add")),1)]),_:1})),[[y,["system:config:add"],"code"]])]),_:1})]),action:i(({row:v})=>[g(s(Y),null,{default:i(()=>[_((f(),d(x,{onClick:T(A=>m(v),["stop"])},{default:i(()=>[u(b(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:config:edit"],"code"]]),g(s(Z),{"get-popup-container":s(oo),placement:"left",title:"确认删除？",onConfirm:A=>h(v)},{default:i(()=>[_((f(),d(x,{danger:"",onClick:n[0]||(n[0]=T(()=>{},["stop"]))},{default:i(()=>[u(b(t.$t("pages.common.delete")),1)]),_:1})),[[y,["system:config:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),g(s(w),{onReload:n[1]||(n[1]=v=>s(r).query())})]),_:1})}}});export{Eo as default};
