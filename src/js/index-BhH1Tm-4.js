var M=Object.defineProperty;var P=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var D=(i,o,e)=>o in i?M(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e,q=(i,o)=>{for(var e in o||(o={}))N.call(o,e)&&D(i,e,o[e]);if(P)for(var e of P(o))O.call(o,e)&&D(i,e,o[e]);return i};var _=(i,o,e)=>new Promise((w,s)=>{var x=p=>{try{g(e.next(p))}catch(f){s(f)}},l=p=>{try{g(e.throw(p))}catch(f){s(f)}},g=p=>p.done?w(p.value):Promise.resolve(p.value).then(x,l);g((e=e.apply(i,o)).next())});import{bl as z,aq as U,al as W}from"./bootstrap-CbEyMBZc.js";import{v as j}from"./vxe-table-5UTMlFMN.js";import{p as F,a as G,b as A,c as L}from"./index-DM1WbR0K.js";import"./vuedraggable.umd-Cwsj9bYW.js";import{_ as H}from"./table-switch.vue_vue_type_script_setup_true_lang-DjGnwzfb.js";import{c as J}from"./download-BL_xY_mD.js";import{c as K,q as Q,_ as X}from"./tenant-package-drawer.vue_vue_type_script_setup_true_lang-B4xGaIDp.js";import S from"./index-Yd03BW_o.js";import{_ as Y}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{_ as Z}from"./fallback.vue_vue_type_script_setup_true_lang-ChoFPR3D.js";import{d as ee,B as te,l as V,V as oe,h as c,o as d,w as n,a as u,b as t,W as C,k as h,t as b}from"../jse/index-index-CKHiV3bJ.js";import{u as ae}from"./use-vxe-grid-jJsowVf7.js";import{u as ne}from"./use-drawer-ZsTa9Rf6.js";import{P as re}from"./index-Bf3KtG2n.js";import{g as ie}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./index-CzyoVQCf.js";import"./index-B7PFKwMa.js";import"./menu-select-table-BHgG0Yrw.js";import"./menu-select-table.vue_vue_type_style_index_0_scoped_96b02cc5_lang-BAd8BLc9.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./tree-DFBawhPd.js";import"./uniq-DFnFScdj.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./Group-u_j2Tbqv.js";import"./index-B1E3W4TM.js";import"./popup-DepLi2Z4.js";import"./rotate-cw-D3jx6xYy.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Qe=ee({__name:"index",setup(i){const o={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:Q(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},e={checkboxConfig:{highlight:!0,reserve:!0},columns:K,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(k,...$)=>_(null,[k,...$],function*({page:a},r={}){return yield G(q({pageNum:a.currentPage,pageSize:a.pageSize},r))})}},rowConfig:{keyField:"packageId"},id:"system-tenant-package-index"},[w,s]=ae({formOptions:o,gridOptions:e}),[x,l]=ne({connectedComponent:X});function g(){l.setData({}),l.open()}function p(a){return _(this,null,function*(){l.setData({id:a.packageId}),l.open()})}function f(a){return _(this,null,function*(){yield A([a.packageId]),yield s.query()})}function B(){const r=s.grid.getCheckboxRecords().map(k=>k.packageId);W.confirm({title:"提示",okType:"danger",content:`确认删除选中的${r.length}条记录吗？`,onOk:()=>_(null,null,function*(){yield A(r),yield s.query()})})}function R(){J(L,"租户套餐数据",s.formApi.form.values)}const{hasAccessByCodes:E,hasAccessByRoles:I}=z(),T=te(()=>I(["superadmin"]));return(a,r)=>{const k=V("a-button"),$=V("ghost-button"),y=oe("access");return T.value?(d(),c(t(Y),{key:0,"auto-content-height":!0},{default:n(()=>[u(t(w),{"table-title":"租户套餐列表"},{"toolbar-tools":n(()=>[u(t(S),null,{default:n(()=>[C((d(),c(k,{onClick:R},{default:n(()=>[h(b(a.$t("pages.common.export")),1)]),_:1})),[[y,["system:tenantPackage:export"],"code"]]),C((d(),c(k,{disabled:!t(j)(t(s)),danger:"",type:"primary",onClick:B},{default:n(()=>[h(b(a.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:tenantPackage:remove"],"code"]]),C((d(),c(k,{type:"primary",onClick:g},{default:n(()=>[h(b(a.$t("pages.common.add")),1)]),_:1})),[[y,["system:tenantPackage:add"],"code"]])]),_:1})]),status:n(({row:m})=>[u(t(H),{value:m.status,"onUpdate:value":v=>m.status=v,api:()=>t(F)(m),disabled:!t(E)(["system:tenantPackage:edit"]),onReload:r[0]||(r[0]=v=>t(s).query())},null,8,["value","onUpdate:value","api","disabled"])]),action:n(({row:m})=>[u(t(S),null,{default:n(()=>[C((d(),c($,{onClick:v=>p(m)},{default:n(()=>[h(b(a.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:tenantPackage:edit"],"code"]]),u(t(re),{"get-popup-container":t(ie),placement:"left",title:"确认删除？",onConfirm:v=>f(m)},{default:n(()=>[C((d(),c($,{danger:"",onClick:r[1]||(r[1]=U(()=>{},["stop"]))},{default:n(()=>[h(b(a.$t("pages.common.delete")),1)]),_:1})),[[y,["system:tenantPackage:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),u(t(x),{onReload:r[2]||(r[2]=m=>t(s).query())})]),_:1})):(d(),c(t(Z),{key:1,description:"您没有租户的访问权限",status:"403"}))}}});export{Qe as default};
