var fe=Object.defineProperty,ge=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var G=(e,t,l)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,B=(e,t)=>{for(var l in t||(t={}))he.call(t,l)&&G(e,l,t[l]);if(q)for(var l of q(t))ye.call(t,l)&&G(e,l,t[l]);return e},j=(e,t)=>ge(e,be(t));var P=(e,t,l)=>new Promise((h,u)=>{var d=m=>{try{c(l.next(m))}catch(f){u(f)}},v=m=>{try{c(l.throw(m))}catch(f){u(f)}},c=m=>m.done?h(m.value):Promise.resolve(m.value).then(d,v);c((l=l.apply(e,t)).next())});import{c as Se}from"./index-B9jrj9-y.js";import{i as xe,j as $e}from"./index-BCokd8-c.js";import"./form-DcAycvJX.js";import Ce from"./approval-card-CeGknLmO.js";import{_ as we}from"./approval-panel.vue_vue_type_script_setup_true_lang-B1awm_pt.js";import{j as Ie,m as _e,_ as x,r as Te,c0 as Re,b4 as R,aU as He,cv as Ne,cw as Pe,e as Ee,p as Me,g as L,c as W,bI as J,bg as Be,o as K,bJ as ze,cq as Ae,aw as De,ar as Q,as as Y,bF as Fe,cx as Z,T as Le,ao as je,bn as z,z as Ue}from"./bootstrap-CbEyMBZc.js";import{_ as Oe}from"./copy-component.vue_vue_type_script_setup_true_lang-9yx0-G2y.js";import"./vxe-table-5UTMlFMN.js";/* empty css                                                          */import{b as We,R as Ve}from"./constant-D_D1w-m3.js";import{d as V,p as y,q as ke,B as H,ah as Xe,a as r,I as de,C as ee,E as qe,v as te,l as Ge,h as U,o as E,w as b,j as I,b as s,k as oe,c as O,f as ae,F as Je,O as Ke,t as Qe}from"../jse/index-index-CKHiV3bJ.js";import{P as Ye}from"./index-7E7RpNGb.js";import{F as Ze}from"./FilterOutlined-Dm1qpLE1.js";import et from"./index-CDs9hzWx.js";import"./index-Bo5G3-h7.js";import{a as tt,I as le}from"./Search-BSSOOXXu.js";import{S as ot}from"./index-BQy1gs98.js";import{_ as at}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{u as lt}from"./use-tabs-CTpa-Bfa.js";import{a as it}from"./tree-DFBawhPd.js";import{a as ie}from"./get-popup-container-P4S1sr5h.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./dict-LWP2femj.js";import"./helper-CgBacOxF.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./approval-card.vue_vue_type_style_index_0_scoped_90981e93_lang-CFyUrHXN.js";import"./relativeTime-C5B3Wg5z.js";import"./approval-content.vue_vue_type_script_setup_true_lang-JZv4tt6H.js";import"./index-vRRmcGk_.js";import"./avatar.vue_vue_type_script_setup_true_lang-CZ6M6Zo9.js";import"./statusUtils-BVmAuBuf.js";import"./BaseInput-B-KbMaIq.js";import"./css-Dmgy8YJo.js";import"./index-CWS-moKy.js";import"./SearchOutlined-wPvswOvm.js";import"./index-B4Ee8RY3.js";import"./index-BCj7hz3q.js";import"./approval-modal.vue_vue_type_script_setup_true_lang-r4oC-lZq.js";import"./use-modal-BtBQhM0d.js";import"./x-C_lPlK2i.js";import"./approval-details.vue_vue_type_script_setup_true_lang-CTP2jlly.js";import"./approval-timeline.vue_vue_type_script_setup_true_lang-CxoHRiMs.js";import"./approval-timeline-item.vue_vue_type_script_setup_true_lang-DbiUkk5H.js";import"./index-Bn5n5c2e.js";import"./index-DMCjRHjH.js";import"./user-select-modal-CF4g6nsp.js";import"./index-CoycSe17.js";import"./dept-tree.vue_vue_type_script_setup_true_lang-BEss8Sse.js";import"./SyncOutlined-CaKwXa3d.js";import"./index-DcmIf06E.js";import"./index-C2Ye5jbl.js";import"./List-CkKZPkf7.js";import"./eagerComputed-ClTeoNNc.js";import"./index-CKqqy29x.js";import"./use-vxe-grid-jJsowVf7.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./LeftOutlined-D2uSfO0F.js";import"./approval-rejection-modal.vue_vue_type_script_setup_true_lang-DB_t6bkD.js";import"./flow-interfere-modal.vue_vue_type_script_setup_true_lang-5N7VWWsA.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Yd03BW_o.js";import"./index-DWD1gEWB.js";import"./move-5_ATuUxE.js";import"./fallback.vue_vue_type_script_setup_true_lang-ChoFPR3D.js";import"./rotate-cw-D3jx6xYy.js";import"./index-CxSj1uA5.js";import"./useMemo-DU68JpYs.js";import"./index-C-6YIAWO.js";import"./DownOutlined-C0xNNL43.js";function re(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function ne(e){return{backgroundColor:e.bgColorSelected,boxShadow:e.boxShadow}}const rt=x({overflow:"hidden"},Re),nt=e=>{const{componentCls:t}=e;return{[t]:x(x(x(x(x({},Te(e)),{display:"inline-block",padding:e.segmentedContainerPadding,color:e.labelColor,backgroundColor:e.bgColor,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,"&-selected":x(x({},ne(e)),{color:e.labelColorHover}),"&::after":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.labelColorHover,"&::after":{backgroundColor:e.bgColorHover}},"&-label":x({minHeight:e.controlHeight-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeight-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`},rt),"&-icon + *":{marginInlineStart:e.marginSM/2},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:x(x({},ne(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${e.paddingXXS}px 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:e.controlHeightLG-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightLG-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:e.controlHeightSM-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightSM-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontalSM}px`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),re(`&-disabled ${t}-item`,e)),re(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"}})}},st=Ie("Segmented",e=>{const{lineWidthBold:t,lineWidth:l,colorTextLabel:h,colorText:u,colorFillSecondary:d,colorBgLayout:v,colorBgElevated:c}=e,m=_e(e,{segmentedPaddingHorizontal:e.controlPaddingHorizontal-l,segmentedPaddingHorizontalSM:e.controlPaddingHorizontalSM-l,segmentedContainerPadding:t,labelColor:h,labelColorHover:u,bgColor:v,bgColorHover:d,bgColorSelected:c});return[nt(m)]}),se=e=>e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null,M=e=>e!==void 0?`${e}px`:void 0,dt=V({props:{value:R(),getValueIndex:R(),prefixCls:R(),motionName:R(),onMotionStart:R(),onMotionEnd:R(),direction:R(),containerRef:R()},emits:["motionStart","motionEnd"],setup(e,t){let{emit:l}=t;const h=y(),u=o=>{var i;const w=e.getValueIndex(o),$=(i=e.containerRef.value)===null||i===void 0?void 0:i.querySelectorAll(`.${e.prefixCls}-item`)[w];return($==null?void 0:$.offsetParent)&&$},d=y(null),v=y(null);ke(()=>e.value,(o,i)=>{const w=u(i),$=u(o),N=se(w),A=se($);d.value=N,v.value=A,l(w&&$?"motionStart":"motionEnd")},{flush:"post"});const c=H(()=>{var o,i;return e.direction==="rtl"?M(-((o=d.value)===null||o===void 0?void 0:o.right)):M((i=d.value)===null||i===void 0?void 0:i.left)}),m=H(()=>{var o,i;return e.direction==="rtl"?M(-((o=v.value)===null||o===void 0?void 0:o.right)):M((i=v.value)===null||i===void 0?void 0:i.left)});let f;const _=o=>{clearTimeout(f),de(()=>{o&&(o.style.transform="translateX(var(--thumb-start-left))",o.style.width="var(--thumb-start-width)")})},C=o=>{f=setTimeout(()=>{o&&(Ne(o,`${e.motionName}-appear-active`),o.style.transform="translateX(var(--thumb-active-left))",o.style.width="var(--thumb-active-width)")})},p=o=>{d.value=null,v.value=null,o&&(o.style.transform=null,o.style.width=null,Pe(o,`${e.motionName}-appear-active`)),l("motionEnd")},T=H(()=>{var o,i;return{"--thumb-start-left":c.value,"--thumb-start-width":M((o=d.value)===null||o===void 0?void 0:o.width),"--thumb-active-left":m.value,"--thumb-active-width":M((i=v.value)===null||i===void 0?void 0:i.width)}});return Xe(()=>{clearTimeout(f)}),()=>{const o={ref:h,style:T.value,class:[`${e.prefixCls}-thumb`]};return r(He,{appear:!0,onBeforeEnter:_,onEnter:C,onAfterEnter:p},{default:()=>[!d.value||!v.value?null:r("div",o,null)]})}}});function ut(e){return e.map(t=>typeof t=="object"&&t!==null?t:{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t})}const mt=()=>({prefixCls:String,options:ze(),block:K(),disabled:K(),size:Be(),value:x(x({},Ae([String,Number])),{required:!0}),motionName:String,onChange:J(),"onUpdate:value":J()}),ue=(e,t)=>{let{slots:l,emit:h}=t;const{value:u,disabled:d,payload:v,title:c,prefixCls:m,label:f=l.label,checked:_,className:C}=e,p=T=>{d||h("change",T,u)};return r("label",{class:W({[`${m}-item-disabled`]:d},C)},[r("input",{class:`${m}-item-input`,type:"radio",disabled:d,checked:_,onChange:p},null),r("div",{class:`${m}-item-label`,title:typeof c=="string"?c:""},[typeof f=="function"?f({value:u,disabled:d,payload:v,title:c}):f!=null?f:u])])};ue.inheritAttrs=!1;const pt=V({name:"ASegmented",inheritAttrs:!1,props:Ee(mt(),{options:[],motionName:"thumb-motion"}),slots:Object,setup(e,t){let{emit:l,slots:h,attrs:u}=t;const{prefixCls:d,direction:v,size:c}=Me("segmented",e),[m,f]=st(d),_=ee(),C=ee(!1),p=H(()=>ut(e.options)),T=(o,i)=>{e.disabled||(l("update:value",i),l("change",i))};return()=>{const o=d.value;return m(r("div",L(L({},u),{},{class:W(o,{[f.value]:!0,[`${o}-block`]:e.block,[`${o}-disabled`]:e.disabled,[`${o}-lg`]:c.value=="large",[`${o}-sm`]:c.value=="small",[`${o}-rtl`]:v.value==="rtl"},u.class),ref:_}),[r("div",{class:`${o}-group`},[r(dt,{containerRef:_,prefixCls:o,value:e.value,motionName:`${o}-${e.motionName}`,direction:v.value,getValueIndex:i=>p.value.findIndex(w=>w.value===i),onMotionStart:()=>{C.value=!0},onMotionEnd:()=>{C.value=!1}},null),p.value.map(i=>r(ue,L(L({key:i.value,prefixCls:o,checked:i.value===e.value,onChange:T},i),{},{className:W(i.className,`${o}-item`,{[`${o}-item-selected`]:i.value===e.value&&!C.value}),disabled:!!e.disabled||!!i.disabled}),h))])]))}}}),ct=De(pt),vt={class:"flex h-full gap-2"},ft={class:"bg-background relative flex h-full min-w-[320px] max-w-[320px] flex-col rounded-lg"},gt={class:"bg-background z-100 sticky left-0 top-0 w-full rounded-t-lg border-b-[1px] border-solid p-2"},bt={class:"flex items-center gap-1"},ht={class:"flex"},yt={key:2,class:"flex items-center justify-center text-[14px] opacity-50"},St={key:3,class:"absolute left-0 top-0 flex h-full w-full items-center justify-center bg-[rgba(0,0,0,0.1)]"},xt={class:"bg-background sticky bottom-0 w-full rounded-b-lg border-t-[1px] py-2"},$t={class:"flex items-center justify-center"},Ct=V({__name:"allTaskWaiting",setup(e){const t=Q.PRESENTED_IMAGE_SIMPLE,l=y([]),h=y(0),u=y(1),d=y(!1),v=[{label:"待办任务",value:"todo"},{label:"已办任务",value:"done"}],c=y("todo"),m=H(()=>c.value==="todo"?xe:$e),f=H(()=>c.value==="done"?"readonly":"admin");function _(){return P(this,null,function*(){var g;(g=o.value)==null||g.scroll({top:0,behavior:"auto"}),u.value=1,l.value=[],yield de(),yield i(!0)})}const C={flowName:"",nodeName:"",flowCode:"",createByIds:[],category:null},p=y(Y(C)),T=H(()=>l.value.length===h.value),o=qe("cardContainerRef");function i(g=!1){return P(this,null,function*(){var S;(S=o.value)==null||S.scroll({top:0,behavior:"auto"}),u.value=1,N.value=void 0,h.value=0,$.value="",g&&(p.value=Y(C),F.value=[]),d.value=!0;const a=yield m.value(B({pageSize:10,pageNum:u.value},p.value));if(l.value=a.rows.map(n=>j(B({},n),{active:!1,randomId:Z()})),h.value=a.total,d.value=!1,l.value.length>0){const n=l.value[0];N.value=n,A(n)}})}te(i);const w=Fe(g=>P(null,null,function*(){if(!g.target)return;const{scrollTop:a,clientHeight:S,scrollHeight:n}=g.target,X=a+S>=n-We;if(console.log("scrollTop + clientHeight",a+S),console.log("scrollHeight",n),X&&!T.value){d.value=!0,u.value+=1;const ce=yield m.value(B({pageSize:10,pageNum:u.value},p.value));l.value.push(...ce.rows.map(ve=>j(B({},ve),{active:!1,randomId:Z()}))),d.value=!1}}),200),$=y(""),N=y();function A(g){return P(this,null,function*(){const{randomId:a}=g;$.value!==a&&(N.value=g,l.value.forEach(S=>{S.active=S.randomId===a}),$.value=a)})}const{refreshTab:me}=lt(),D=y(!1),F=y([]);function pe(g){D.value=!0,F.value=g,p.value.createByIds=g.map(a=>a.userId)}const k=y([]);return te(()=>P(null,null,function*(){const g=yield Se();it(g,"label"," / "),k.value=g})),(g,a)=>{const S=Ge("a-button");return E(),U(s(at),{"auto-content-height":!0},{default:b(()=>[I("div",vt,[I("div",ft,[I("div",gt,[r(s(ct),{value:c.value,"onUpdate:value":a[0]||(a[0]=n=>c.value=n),options:v,block:"",class:"mb-2",onChange:_},null,8,["value"]),I("div",bt,[r(s(tt),{value:p.value.flowName,"onUpdate:value":a[1]||(a[1]=n=>p.value.flowName=n),placeholder:"流程名称搜索",onSearch:a[2]||(a[2]=n=>i(!1))},null,8,["value"]),r(s(Le),{placement:"top",title:"重置"},{default:b(()=>[r(S,{onClick:a[3]||(a[3]=n=>i(!0))},{default:b(()=>[r(s(Ve))]),_:1})]),_:1}),r(s(Ye),{open:D.value,"onUpdate:open":a[11]||(a[11]=n=>D.value=n),"get-popup-container":s(ie),placement:"rightTop",trigger:"click"},{title:b(()=>a[13]||(a[13]=[I("div",{class:"w-full border-b pb-[12px] text-[16px]"},"搜索",-1)])),content:b(()=>[r(s(je),{colon:!1,"label-col":{span:6},model:p.value,autocomplete:"off",class:"w-[300px]",onFinish:a[10]||(a[10]=()=>i(!1))},{default:b(()=>[r(s(z),{label:"申请人"},{default:b(()=>[r(s(Oe),{"user-list":F.value,"onUpdate:userList":a[4]||(a[4]=n=>F.value=n),onCancel:a[5]||(a[5]=()=>D.value=!0),onFinish:pe},null,8,["user-list"])]),_:1}),r(s(z),{label:"流程分类"},{default:b(()=>[r(s(et),{value:p.value.category,"onUpdate:value":a[6]||(a[6]=n=>p.value.category=n),"allow-clear":!0,"field-names":{label:"label",value:"id"},"get-popup-container":s(ie),"tree-data":k.value,"tree-default-expand-all":!0,"tree-line":{showLeafIcon:!1},placeholder:"请选择","tree-node-filter-prop":"label","tree-node-label-prop":"fullName"},null,8,["value","get-popup-container","tree-data"])]),_:1}),r(s(z),{label:"任务名称"},{default:b(()=>[r(s(le),{value:p.value.nodeName,"onUpdate:value":a[7]||(a[7]=n=>p.value.nodeName=n),placeholder:"请输入"},null,8,["value"])]),_:1}),r(s(z),{label:"流程编码"},{default:b(()=>[r(s(le),{value:p.value.flowCode,"onUpdate:value":a[8]||(a[8]=n=>p.value.flowCode=n),placeholder:"请输入"},null,8,["value"])]),_:1}),r(s(z),null,{default:b(()=>[I("div",ht,[r(S,{block:"","html-type":"submit",type:"primary"},{default:b(()=>a[14]||(a[14]=[oe(" 搜索 ")])),_:1,__:[14]}),r(S,{block:"",class:"ml-2",onClick:a[9]||(a[9]=n=>i(!0))},{default:b(()=>a[15]||(a[15]=[oe(" 重置 ")])),_:1,__:[15]})])]),_:1})]),_:1},8,["model"])]),default:b(()=>[r(S,null,{default:b(()=>[r(s(Ze))]),_:1})]),_:1},8,["open","get-popup-container"])])]),I("div",{ref_key:"cardContainerRef",ref:o,class:"thin-scrollbar flex flex-1 flex-col gap-2 overflow-y-auto py-3",onScroll:a[12]||(a[12]=(...n)=>s(w)&&s(w)(...n))},[l.value.length>0?(E(!0),O(Je,{key:0},Ke(l.value,n=>(E(),U(s(Ce),{key:n.randomId,info:n,class:"mx-2","row-key":"randomId",onClick:X=>A(n)},null,8,["info","onClick"]))),128)):(E(),U(s(Q),{key:1,image:s(t)},null,8,["image"])),T.value&&l.value.length>0?(E(),O("div",yt," 没有更多数据了 ")):ae("",!0),d.value?(E(),O("div",St,[r(s(ot),{tip:"加载中..."})])):ae("",!0)],544),I("div",xt,[I("div",$t," 共 "+Qe(h.value)+" 条记录 ",1)])]),r(s(we),{task:N.value,type:f.value,onReload:s(me)},null,8,["task","type","onReload"])])]),_:1})}}}),ia=Ue(Ct,[["__scopeId","data-v-7341fd2a"]]);export{ia as default};
