var A=Object.defineProperty,H=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var B=(p,r,e)=>r in p?A(p,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):p[r]=e,k=(p,r)=>{for(var e in r||(r={}))q.call(r,e)&&B(p,e,r[e]);if(R)for(var e of R(r))J.call(r,e)&&B(p,e,r[e]);return p},N=(p,r)=>H(p,G(r));var C=(p,r,e)=>new Promise((g,d)=>{var c=m=>{try{i(e.next(m))}catch(b){d(b)}},x=m=>{try{i(e.throw(m))}catch(b){d(b)}},i=m=>m.done?g(m.value):Promise.resolve(m.value).then(c,x);i((e=e.apply(p,r)).next())});import{b as D}from"./index-BCj7hz3q.js";import"./form-DcAycvJX.js";import{ar as $,as as P,bF as K,T as Q,ao as W,bn as S,z as X}from"./bootstrap-CbEyMBZc.js";import Y from"./approval-card-CeGknLmO.js";import{_ as Z}from"./approval-panel.vue_vue_type_script_setup_true_lang-B1awm_pt.js";import"./vxe-table-5UTMlFMN.js";/* empty css                                                          */import{b as tt,R as et}from"./constant-D_D1w-m3.js";import{F as ot}from"./FilterOutlined-Dm1qpLE1.js";import"./index-Bo5G3-h7.js";import{a as at,I as j}from"./Search-BSSOOXXu.js";import{S as lt}from"./index-BQy1gs98.js";import{_ as rt}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as it,p as v,B as st,E as pt,v as nt,l as mt,h as T,o as _,w as s,j as u,a as l,b as a,k as z,c as E,f as L,F as ut,O as ft,t as dt}from"../jse/index-index-CKHiV3bJ.js";import{u as ct}from"./use-tabs-CTpa-Bfa.js";import{P as vt}from"./index-7E7RpNGb.js";import{a as gt}from"./get-popup-container-P4S1sr5h.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./dict-LWP2femj.js";import"./helper-CgBacOxF.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./approval-card.vue_vue_type_style_index_0_scoped_90981e93_lang-CFyUrHXN.js";import"./relativeTime-C5B3Wg5z.js";import"./approval-content.vue_vue_type_script_setup_true_lang-JZv4tt6H.js";import"./index-vRRmcGk_.js";import"./avatar.vue_vue_type_script_setup_true_lang-CZ6M6Zo9.js";import"./statusUtils-BVmAuBuf.js";import"./BaseInput-B-KbMaIq.js";import"./css-Dmgy8YJo.js";import"./index-CWS-moKy.js";import"./SearchOutlined-wPvswOvm.js";import"./index-B4Ee8RY3.js";import"./index-BCokd8-c.js";import"./approval-modal.vue_vue_type_script_setup_true_lang-r4oC-lZq.js";import"./copy-component.vue_vue_type_script_setup_true_lang-9yx0-G2y.js";import"./user-select-modal-CF4g6nsp.js";import"./index-CoycSe17.js";import"./dept-tree.vue_vue_type_script_setup_true_lang-BEss8Sse.js";import"./index-Bn5n5c2e.js";import"./SyncOutlined-CaKwXa3d.js";import"./index-DcmIf06E.js";import"./index-C2Ye5jbl.js";import"./List-CkKZPkf7.js";import"./eagerComputed-ClTeoNNc.js";import"./index-CKqqy29x.js";import"./use-vxe-grid-jJsowVf7.js";import"./init-5GXIIGpx.js";import"./use-modal-BtBQhM0d.js";import"./x-C_lPlK2i.js";import"./index-CUsW12bK.js";import"./LeftOutlined-D2uSfO0F.js";import"./index-CxSj1uA5.js";import"./approval-details.vue_vue_type_script_setup_true_lang-CTP2jlly.js";import"./approval-timeline.vue_vue_type_script_setup_true_lang-CxoHRiMs.js";import"./approval-timeline-item.vue_vue_type_script_setup_true_lang-DbiUkk5H.js";import"./index-DMCjRHjH.js";import"./approval-rejection-modal.vue_vue_type_script_setup_true_lang-DB_t6bkD.js";import"./flow-interfere-modal.vue_vue_type_script_setup_true_lang-5N7VWWsA.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Yd03BW_o.js";import"./index-DWD1gEWB.js";import"./move-5_ATuUxE.js";import"./fallback.vue_vue_type_script_setup_true_lang-ChoFPR3D.js";import"./rotate-cw-D3jx6xYy.js";const bt={class:"flex h-full gap-2"},_t={class:"bg-background relative flex h-full min-w-[320px] max-w-[320px] flex-col rounded-lg"},yt={class:"bg-background z-100 sticky left-0 top-0 w-full rounded-t-lg border-b-[1px] border-solid p-2"},kt={class:"flex items-center gap-1"},xt={class:"flex"},wt={key:2,class:"flex items-center justify-center text-[14px] opacity-50"},Ct={key:3,class:"absolute left-0 top-0 flex h-full w-full items-center justify-center bg-[rgba(0,0,0,0.1)]"},ht={class:"bg-background sticky bottom-0 w-full rounded-b-lg border-t-[1px] py-2"},Nt={class:"flex items-center justify-center"},St=it({__name:"myDocument",setup(p){const r=$.PRESENTED_IMAGE_SIMPLE,e=v([]),g=v(0),d=v(1),c=v(!1),x={flowName:"",nodeName:"",flowCode:"",category:null},i=v(P(x)),m=st(()=>e.value.length===g.value),b=pt("cardContainerRef");function y(f=!1){return C(this,null,function*(){var n;(n=b.value)==null||n.scroll({top:0,behavior:"auto"}),d.value=1,w.value=void 0,g.value=0,h.value="",f&&(i.value=P(x)),c.value=!0;const t=yield D(k({pageSize:10,pageNum:d.value},i.value));if(e.value=t.rows.map(o=>N(k({},o),{active:!1})),g.value=t.total,c.value=!1,e.value.length>0){const o=e.value[0];w.value=o,I(o)}})}nt(y);const F=K(f=>C(null,null,function*(){if(!f.target)return;const{scrollTop:t,clientHeight:n,scrollHeight:o}=f.target;if(t+n>=o-tt&&!m.value){c.value=!0,d.value+=1;const M=yield D(k({pageSize:10,pageNum:d.value},i.value));e.value.push(...M.rows.map(U=>N(k({},U),{active:!1}))),c.value=!1}}),200),h=v(""),w=v();function I(f){return C(this,null,function*(){const{id:t}=f;h.value!==t&&(w.value=f,e.value.forEach(n=>{n.active=n.id===t}),h.value=t)})}const{refreshTab:O}=ct();return(f,t)=>{const n=mt("a-button");return _(),T(a(rt),{"auto-content-height":!0},{default:s(()=>[u("div",bt,[u("div",_t,[u("div",yt,[u("div",kt,[l(a(at),{value:i.value.flowName,"onUpdate:value":t[0]||(t[0]=o=>i.value.flowName=o),placeholder:"流程名称搜索",onSearch:t[1]||(t[1]=o=>y(!1))},null,8,["value"]),l(a(Q),{placement:"top",title:"重置"},{default:s(()=>[l(n,{onClick:t[2]||(t[2]=o=>y(!0))},{default:s(()=>[l(a(et))]),_:1})]),_:1}),l(a(vt),{"get-popup-container":a(gt),placement:"rightTop",trigger:"click"},{title:s(()=>t[8]||(t[8]=[u("div",{class:"w-full border-b pb-[12px] text-[16px]"},"搜索",-1)])),content:s(()=>[l(a(W),{colon:!1,"label-col":{span:6},model:i.value,autocomplete:"off",class:"w-[300px]",onFinish:t[6]||(t[6]=()=>y(!1))},{default:s(()=>[l(a(S),{label:"任务名称"},{default:s(()=>[l(a(j),{value:i.value.nodeName,"onUpdate:value":t[3]||(t[3]=o=>i.value.nodeName=o),placeholder:"请输入"},null,8,["value"])]),_:1}),l(a(S),{label:"流程编码"},{default:s(()=>[l(a(j),{value:i.value.flowCode,"onUpdate:value":t[4]||(t[4]=o=>i.value.flowCode=o),placeholder:"请输入"},null,8,["value"])]),_:1}),l(a(S),null,{default:s(()=>[u("div",xt,[l(n,{block:"","html-type":"submit",type:"primary"},{default:s(()=>t[9]||(t[9]=[z(" 搜索 ")])),_:1,__:[9]}),l(n,{block:"",class:"ml-2",onClick:t[5]||(t[5]=o=>y(!0))},{default:s(()=>t[10]||(t[10]=[z(" 重置 ")])),_:1,__:[10]})])]),_:1})]),_:1},8,["model"])]),default:s(()=>[l(n,null,{default:s(()=>[l(a(ot))]),_:1})]),_:1},8,["get-popup-container"])])]),u("div",{ref_key:"cardContainerRef",ref:b,class:"thin-scrollbar flex flex-1 flex-col gap-2 overflow-y-auto py-3",onScroll:t[7]||(t[7]=(...o)=>a(F)&&a(F)(...o))},[e.value.length>0?(_(!0),E(ut,{key:0},ft(e.value,o=>(_(),T(a(Y),{key:o.id,info:o,class:"mx-2",onClick:V=>I(o)},null,8,["info","onClick"]))),128)):(_(),T(a($),{key:1,image:a(r)},null,8,["image"])),m.value&&e.value.length>0?(_(),E("div",wt," 没有更多数据了 ")):L("",!0),c.value?(_(),E("div",Ct,[l(a(lt),{tip:"加载中..."})])):L("",!0)],544),u("div",ht,[u("div",Nt," 共 "+dt(g.value)+" 条记录 ",1)])]),l(a(Z),{task:w.value,type:"myself",onReload:a(O)},null,8,["task","onReload"])])]),_:1})}}}),eo=X(St,[["__scopeId","data-v-70147c01"]]);export{eo as default};
