var m=(f,i,e)=>new Promise((t,c)=>{var d=a=>{try{l(e.next(a))}catch(r){c(r)}},s=a=>{try{l(e.throw(a))}catch(r){c(r)}},l=a=>a.done?t(a.value):Promise.resolve(a.value).then(d,s);l((e=e.apply(f,i)).next())});import{$ as p}from"./bootstrap-CbEyMBZc.js";import{u as h}from"./form-DcAycvJX.js";import{d as C,a as _,b as v}from"./index-CU1tYpZa.js";import{m as B}from"./data-xOwsLIQf.js";import{d as b,p as y,B as V,S as x,h as A,o as L,w as k,a as D,b as w}from"../jse/index-index-CKHiV3bJ.js";import{u as F}from"./use-modal-BtBQhM0d.js";const P=b({__name:"demo-modal",emits:["reload"],setup(f,{emit:i}){const e=i,t=y(!1),c=V(()=>t.value?p("pages.common.edit"):p("pages.common.add")),[d,s]=h({commonConfig:{formItemClass:"col-span-2",labelWidth:80,componentProps:{class:"w-full"}},schema:B(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[l,a]=F({fullscreenButton:!1,onCancel:u,onConfirm:r,onOpenChange:n=>m(null,null,function*(){if(!n)return null;a.modalLoading(!0);const{id:o}=a.getData();if(t.value=!!o,t.value&&o){const g=yield C(o);yield s.setValues(g)}a.modalLoading(!1)})});function r(){return m(this,null,function*(){try{a.modalLoading(!0);const{valid:n}=yield s.validate();if(!n)return;const o=x(yield s.getValues());yield t.value?_(o):v(o),e("reload"),yield u()}catch(n){console.error(n)}finally{a.modalLoading(!1)}})}function u(){return m(this,null,function*(){a.close(),yield s.resetForm()})}return(n,o)=>(L(),A(w(l),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:k(()=>[D(w(d))]),_:1},8,["title"]))}});export{P as _};
