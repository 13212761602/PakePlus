var E=Object.defineProperty;var D=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var $=(n,e,t)=>e in n?E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,I=(n,e)=>{for(var t in e||(e={}))G.call(e,t)&&$(n,t,e[t]);if(D)for(var t of D(e))M.call(e,t)&&$(n,t,e[t]);return n};var d=(n,e,t)=>new Promise((x,b)=>{var a=p=>{try{m(t.next(p))}catch(g){b(g)}},_=p=>{try{m(t.throw(p))}catch(g){b(g)}},m=p=>p.done?x(p.value):Promise.resolve(p.value).then(a,_);m((t=t.apply(n,e)).next())});import{aq as N,al as O}from"./bootstrap-CbEyMBZc.js";import{v as T}from"./vxe-table-5UTMlFMN.js";import{p as z,a as S,b as F}from"./index-A9yvVzTO.js";import{c as L}from"./download-BL_xY_mD.js";import{_ as W}from"./dept-tree.vue_vue_type_script_setup_true_lang-BEss8Sse.js";import{q as j,c as U,_ as H}from"./post-drawer.vue_vue_type_script_setup_true_lang-Ch2LwP-4.js";import q from"./index-Yd03BW_o.js";import{_ as J}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as K,p as Q,l as P,V as X,h as c,o as u,w as s,a as f,b as i,W as C,k as v,t as h}from"../jse/index-index-CKHiV3bJ.js";import{u as Y}from"./use-vxe-grid-jJsowVf7.js";import{u as Z}from"./use-drawer-ZsTa9Rf6.js";import{P as oo}from"./index-Bf3KtG2n.js";import{g as eo}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./index-CoycSe17.js";import"./index-Bn5n5c2e.js";import"./Search-BSSOOXXu.js";import"./statusUtils-BVmAuBuf.js";import"./BaseInput-B-KbMaIq.js";import"./index-CWS-moKy.js";import"./SearchOutlined-wPvswOvm.js";import"./index-Bo5G3-h7.js";import"./index-B4Ee8RY3.js";import"./SyncOutlined-CaKwXa3d.js";import"./index-DcmIf06E.js";import"./index-C2Ye5jbl.js";import"./List-CkKZPkf7.js";import"./eagerComputed-ClTeoNNc.js";import"./index-CKqqy29x.js";import"./popup-DepLi2Z4.js";import"./dict-LWP2femj.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./index-BQy1gs98.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./tree-DFBawhPd.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const oe=K({__name:"index",setup(n){const e=Q([]),t={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:j(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",handleReset:()=>d(null,null,function*(){e.value=[];const{formApi:r,reload:o}=a;yield r.resetForm();const l=r.form.values;r.setLatestSubmissionValues(l),yield o(l)})},x={checkboxConfig:{highlight:!0,reserve:!0,trigger:"cell"},columns:U,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(l,...k)=>d(null,[l,...k],function*({page:r},o={}){return e.value.length===1?o.belongDeptId=e.value[0]:Reflect.deleteProperty(o,"belongDeptId"),yield z(I({pageNum:r.currentPage,pageSize:r.pageSize},o))})}},rowConfig:{keyField:"postId"},id:"system-post-index"},[b,a]=Y({formOptions:t,gridOptions:x}),[_,m]=Z({connectedComponent:H});function p(){m.setData({}),m.open()}function g(r){return d(this,null,function*(){m.setData({id:r.postId}),m.open()})}function V(r){return d(this,null,function*(){yield S([r.postId]),yield a.query()})}function R(){const o=a.grid.getCheckboxRecords().map(l=>l.postId);O.confirm({title:"提示",okType:"danger",content:`确认删除选中的${o.length}条记录吗？`,onOk:()=>d(null,null,function*(){yield S(o),yield a.query()})})}function A(){L(F,"岗位信息",a.formApi.form.values)}return(r,o)=>{const l=P("a-button"),k=P("GhostButton"),y=X("access");return u(),c(i(J),{"auto-content-height":!0,"content-class":"flex gap-[8px] w-full"},{default:s(()=>[f(W,{"select-dept-id":e.value,"onUpdate:selectDeptId":o[0]||(o[0]=w=>e.value=w),class:"w-[260px]",onReload:o[1]||(o[1]=()=>i(a).reload()),onSelect:o[2]||(o[2]=()=>i(a).reload())},null,8,["select-dept-id"]),f(i(b),{class:"flex-1 overflow-hidden","table-title":"岗位列表"},{"toolbar-tools":s(()=>[f(i(q),null,{default:s(()=>[C((u(),c(l,{onClick:A},{default:s(()=>[v(h(r.$t("pages.common.export")),1)]),_:1})),[[y,["system:post:export"],"code"]]),C((u(),c(l,{disabled:!i(T)(i(a)),danger:"",type:"primary",onClick:R},{default:s(()=>[v(h(r.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:post:remove"],"code"]]),C((u(),c(l,{type:"primary",onClick:p},{default:s(()=>[v(h(r.$t("pages.common.add")),1)]),_:1})),[[y,["system:post:add"],"code"]])]),_:1})]),action:s(({row:w})=>[f(i(q),null,{default:s(()=>[C((u(),c(k,{onClick:B=>g(w)},{default:s(()=>[v(h(r.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:post:edit"],"code"]]),f(i(oo),{"get-popup-container":i(eo),placement:"left",title:"确认删除？",onConfirm:B=>V(w)},{default:s(()=>[C((u(),c(k,{danger:"",onClick:o[3]||(o[3]=N(()=>{},["stop"]))},{default:s(()=>[v(h(r.$t("pages.common.delete")),1)]),_:1})),[[y,["system:post:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),f(i(_),{onReload:o[4]||(o[4]=w=>i(a).query())})]),_:1})}}});export{oe as default};
