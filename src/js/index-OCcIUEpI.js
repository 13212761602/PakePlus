var P=Object.defineProperty;var q=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var E=(r,a,o)=>a in r?P(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,I=(r,a)=>{for(var o in a||(a={}))B.call(a,o)&&E(r,o,a[o]);if(q)for(var o of q(a))F.call(a,o)&&E(r,o,a[o]);return r};var x=(r,a,o)=>new Promise((v,s)=>{var $=p=>{try{g(o.next(p))}catch(C){s(C)}},d=p=>{try{g(o.throw(p))}catch(C){s(C)}},g=p=>p.done?v(p.value):Promise.resolve(p.value).then($,d);g((o=o.apply(r,a)).next())});import{aq as O}from"./bootstrap-CbEyMBZc.js";import"./vxe-table-5UTMlFMN.js";import{q as N,c as R,_ as W,d as j,a as G}from"./dept-drawer.vue_vue_type_script_setup_true_lang-DyBYAlpI.js";import T from"./index-Yd03BW_o.js";import{_ as L}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{e as V}from"./tree-DFBawhPd.js";import{d as M,l as S,V as Y,h as b,o as y,w as n,a as m,b as l,W as k,k as u,t as f,I as z}from"../jse/index-index-CKHiV3bJ.js";import{u as H}from"./use-vxe-grid-jJsowVf7.js";import{u as J}from"./use-drawer-ZsTa9Rf6.js";import{P as K}from"./index-Bf3KtG2n.js";import{g as Q}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./index-CoycSe17.js";import"./helper-CgBacOxF.js";import"./popup-DepLi2Z4.js";import"./dict-LWP2femj.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./index-BQy1gs98.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const Ve=M({__name:"index",setup(r){const a={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:N(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={columns:R,height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(i,...D)=>x(null,[i,...D],function*(t,e={}){return{rows:yield j(I({},e))}}),querySuccess:()=>{V(s.grid.getData(),t=>t.expand=!0),z(()=>{h(!0)})}}},scrollY:{enabled:!1,gt:0},rowConfig:{keyField:"deptId"},treeConfig:{parentField:"parentId",rowField:"deptId",transform:!0},id:"system-dept-index"},[v,s]=H({formOptions:a,gridOptions:o,gridEvents:{cellDblclick:t=>{const{row:e={}}=t;if(!(e!=null&&e.children))return;const i=e==null?void 0:e.expand;s.grid.setTreeExpand(e,!i),e.expand=!i},toggleTreeExpand:t=>{const{row:e={},expanded:i}=t;e.expand=i}}}),[$,d]=J({connectedComponent:W});function g(){d.setData({update:!1}),d.open()}function p(t){const{deptId:e}=t;d.setData({id:e,update:!1}),d.open()}function C(t){return x(this,null,function*(){d.setData({id:t.deptId,update:!0}),d.open()})}function A(t){return x(this,null,function*(){yield G(t.deptId),yield s.query()})}function h(t){var e;V(s.grid.getData(),i=>i.expand=t),(e=s.grid)==null||e.setAllTreeExpand(t)}return(t,e)=>{const i=S("a-button"),D=S("ghost-button"),_=Y("access");return y(),b(l(L),{"auto-content-height":!0},{default:n(()=>[m(l(v),{"table-title":"部门列表","table-title-help":"双击展开/收起子菜单"},{"toolbar-tools":n(()=>[m(l(T),null,{default:n(()=>[m(i,{onClick:e[0]||(e[0]=c=>h(!1))},{default:n(()=>[u(f(t.$t("pages.common.collapse")),1)]),_:1}),m(i,{onClick:e[1]||(e[1]=c=>h(!0))},{default:n(()=>[u(f(t.$t("pages.common.expand")),1)]),_:1}),k((y(),b(i,{type:"primary",onClick:g},{default:n(()=>[u(f(t.$t("pages.common.add")),1)]),_:1})),[[_,["system:dept:add"],"code"]])]),_:1})]),action:n(({row:c})=>[m(l(T),null,{default:n(()=>[k((y(),b(D,{onClick:w=>C(c)},{default:n(()=>[u(f(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[_,["system:dept:edit"],"code"]]),k((y(),b(D,{class:"btn-success",onClick:w=>p(c)},{default:n(()=>[u(f(t.$t("pages.common.add")),1)]),_:2},1032,["onClick"])),[[_,["system:dept:add"],"code"]]),m(l(K),{"get-popup-container":l(Q),placement:"left",title:"确认删除？",onConfirm:w=>A(c)},{default:n(()=>[k((y(),b(D,{danger:"",onClick:e[2]||(e[2]=O(()=>{},["stop"]))},{default:n(()=>[u(f(t.$t("pages.common.delete")),1)]),_:1})),[[_,["system:dept:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),m(l($),{onReload:e[3]||(e[3]=c=>l(s).query())})]),_:1})}}});export{Ve as default};
