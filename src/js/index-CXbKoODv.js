var B=Object.defineProperty;var A=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var V=(n,t,o)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,D=(n,t)=>{for(var o in t||(t={}))E.call(t,o)&&V(n,o,t[o]);if(A)for(var o of A(t))F.call(t,o)&&V(n,o,t[o]);return n};var k=(n,t,o)=>new Promise((b,s)=>{var h=r=>{try{p(o.next(r))}catch(u){s(u)}},c=r=>{try{p(o.throw(r))}catch(u){s(u)}},p=r=>r.done?b(r.value):Promise.resolve(r.value).then(h,c);p((o=o.apply(n,t)).next())});import{aq as x}from"./bootstrap-CbEyMBZc.js";import"./vxe-table-5UTMlFMN.js";import{e as M,f as N}from"./index-B9jrj9-y.js";import{c as O,q as R,_ as W}from"./category-modal.vue_vue_type_script_setup_true_lang-Dfjp6npd.js";import S from"./index-Yd03BW_o.js";import{_ as j}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as G,l as T,V as L,h as y,o as _,w as a,a as l,b as i,W as w,k as m,t as f,I as Y}from"../jse/index-index-CKHiV3bJ.js";import{u as z}from"./use-vxe-grid-jJsowVf7.js";import{u as H}from"./use-modal-BtBQhM0d.js";import{P as J}from"./index-Bf3KtG2n.js";import{g as K}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./popup-DepLi2Z4.js";import"./tree-DFBawhPd.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const be=G({__name:"index",setup(n){const t={commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:R(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={columns:O,height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:($,...v)=>k(null,[$,...v],function*(e,d={}){return{rows:yield M(D({},d))}}),querySuccess:()=>{Y(()=>{I()})}}},scrollY:{enabled:!1,gt:0},rowConfig:{keyField:"categoryId"},treeConfig:{parentField:"parentId",rowField:"categoryId",transform:!0},id:"workflow-category-index"},[b,s]=z({formOptions:t,gridOptions:o}),[h,c]=H({connectedComponent:W});function p(e){c.setData({parentId:e==null?void 0:e.categoryId}),c.open()}function r(e){return k(this,null,function*(){c.setData({id:e.categoryId}),c.open()})}function u(e){return k(this,null,function*(){yield N(e.categoryId),yield s.query()})}function I(){var e;(e=s.grid)==null||e.setAllTreeExpand(!0)}function P(){var e;(e=s.grid)==null||e.setAllTreeExpand(!1)}return(e,d)=>{const $=T("a-button"),v=T("ghost-button"),g=L("access");return _(),y(i(j),{"auto-content-height":!0},{default:a(()=>[l(i(b),{"table-title":"流程分类列表"},{"toolbar-tools":a(()=>[l(i(S),null,{default:a(()=>[l($,{onClick:P},{default:a(()=>[m(f(e.$t("pages.common.collapse")),1)]),_:1}),l($,{onClick:I},{default:a(()=>[m(f(e.$t("pages.common.expand")),1)]),_:1}),w((_(),y($,{type:"primary",onClick:p},{default:a(()=>[m(f(e.$t("pages.common.add")),1)]),_:1})),[[g,["workflow:category:add"],"code"]])]),_:1})]),action:a(({row:C})=>[l(i(S),null,{default:a(()=>[w((_(),y(v,{onClick:x(q=>r(C),["stop"])},{default:a(()=>[m(f(e.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[g,["workflow:category:edit"],"code"]]),w((_(),y(v,{class:"btn-success",onClick:x(q=>p(C),["stop"])},{default:a(()=>[m(f(e.$t("pages.common.add")),1)]),_:2},1032,["onClick"])),[[g,["workflow:category:edit"],"code"]]),l(i(J),{"get-popup-container":i(K),placement:"left",title:"确认删除？",onConfirm:q=>u(C)},{default:a(()=>[w((_(),y(v,{danger:"",onClick:d[0]||(d[0]=x(()=>{},["stop"]))},{default:a(()=>[m(f(e.$t("pages.common.delete")),1)]),_:1})),[[g,["workflow:category:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),l(i(h),{onReload:d[1]||(d[1]=C=>i(s).query())})]),_:1})}}});export{be as default};
