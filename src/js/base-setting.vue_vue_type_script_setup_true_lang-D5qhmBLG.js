var h=Object.defineProperty,S=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var f=(s,t,e)=>t in s?h(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,p=(s,t)=>{for(var e in t||(t={}))g.call(t,e)&&f(s,e,t[e]);if(c)for(var e of c(t))x.call(t,e)&&f(s,e,t[e]);return s},u=(s,t)=>S(s,_(t));var d=(s,t,e)=>new Promise((l,a)=>{var i=o=>{try{r(e.next(o))}catch(n){a(n)}},m=o=>{try{r(e.throw(o))}catch(n){a(n)}},r=o=>o.done?l(o.value):Promise.resolve(o.value).then(i,m);r((e=e.apply(s,t)).next())});import{u as I}from"./form-DcAycvJX.js";import{a as N}from"./index-D9lAdaLl.js";import{b7 as w,ak as B,ap as k}from"./bootstrap-CbEyMBZc.js";import{g as y}from"./dict-LWP2femj.js";import{m as O}from"./mitt-D4bcW7KS.js";import{p as U}from"./pick-DDCWWYz_.js";import{d as E,v as V,c as q,o as C,a as D,b as F}from"../jse/index-index-CKHiV3bJ.js";import{a as b}from"./use-vben-form-CDDuv56b.js";const P=O(),A={class:"mt-[16px] md:w-full lg:w-1/2 2xl:w-2/5"},$=E({__name:"base-setting",props:{profile:{}},setup(s){const t=s,e=w(),l=B(),[a,i]=I({actionWrapperClass:"text-left ml-[68px] mb-[16px]",commonConfig:{labelWidth:60},handleSubmit:r,resetButtonOptions:{show:!1},schema:[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"userId",label:"用户ID",rules:"required"},{component:"Input",fieldName:"nickName",label:"昵称",rules:"required"},{component:"Input",fieldName:"email",label:"邮箱",rules:b().email("请输入正确的邮箱")},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:y(k.SYS_USER_SEX),optionType:"button"},defaultValue:"0",fieldName:"sex",label:"性别",rules:"required"},{component:"Input",fieldName:"phonenumber",label:"电话",rules:b().regex(/^1[3-9]\d{9}$/,"请输入正确的电话")}],submitButtonOptions:{content:"更新信息"}});function m(o){i.setState(n=>u(p({},n),{submitButtonOptions:u(p({},n.submitButtonOptions),{loading:o})}))}function r(o){return d(this,null,function*(){try{m(!0),yield N(o);const n=yield l.fetchUserInfo();e.setUserInfo(n),P.emit("updateProfile")}catch(n){console.error(n)}finally{m(!1)}})}return V(()=>{const o=U(t.profile.user,["userId","nickName","email","phonenumber","sex"]);i.setValues(o)}),(o,n)=>(C(),q("div",A,[D(F(a))]))}});export{$ as _,P as e};
