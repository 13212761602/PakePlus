var j=Object.defineProperty;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var S=(s,o,e)=>o in s?j(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,F=(s,o)=>{for(var e in o||(o={}))G.call(o,e)&&S(s,e,o[e]);if(E)for(var e of E(o))H.call(o,e)&&S(s,e,o[e]);return s};var g=(s,o,e)=>new Promise((D,r)=>{var M=a=>{try{_(e.next(a))}catch(h){r(h)}},b=a=>{try{_(e.throw(a))}catch(h){r(h)}},_=a=>a.done?D(a.value):Promise.resolve(a.value).then(M,b);_((e=e.apply(s,o)).next())});import{aq as A,al as J}from"./bootstrap-CbEyMBZc.js";import{v as K,a as Q}from"./vxe-table-5UTMlFMN.js";import{c as X,q as k,e as Z,f as V,g as ee}from"./data-e4sOGhYF.js";import{u as oe,_ as te}from"./useFieldConfig-CEaS09tt.js";import{c as ne}from"./download-BL_xY_mD.js";import{_ as ie}from"./proAnomalyResponse-modal.vue_vue_type_script_setup_true_lang-BNYhVChy.js";import{_ as ae}from"./proAnomalyResponse-view-modal.vue_vue_type_script_setup_true_lang-xZcG-9wv.js";import q from"./index-Yd03BW_o.js";import{F as re}from"./FilterOutlined-Dm1qpLE1.js";import{_ as se}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as me,l as P,V as pe,h as c,o as f,w as i,a as p,b as n,W as C,k as y,t as Y}from"../jse/index-index-CKHiV3bJ.js";import{u as le}from"./use-vxe-grid-jJsowVf7.js";import{u as w}from"./use-modal-BtBQhM0d.js";import{P as de}from"./index-Bf3KtG2n.js";import{g as ce}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./useSysUserSelect-F1t7eIpS.js";import"./index-CoycSe17.js";import"./vuedraggable.umd-Cwsj9bYW.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const R="mes-proAnomalyResponse-index",so=me({__name:"index",setup(s){const o={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:k(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["arrivalTime",["params[beginArrivalTime]","params[endArrivalTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]],["responseStartTime",["params[beginResponseStartTime]","params[endResponseStartTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]],["responseEndTime",["params[beginResponseEndTime]","params[endResponseEndTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]],["escalationTime",["params[beginEscalationTime]","params[endEscalationTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},e={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:X,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(v,...u)=>g(null,[v,...u],function*({page:t,sorts:m},l={}){const d=F({pageNum:t.currentPage,pageSize:t.pageSize},l);return Q(d,m),yield Z(d)})}},rowConfig:{keyField:"id"},sortConfig:{remote:!0,multiple:!1},id:R},[D,r]=le({formOptions:o,gridOptions:e,gridEvents:{sortChange:()=>r.query()}}),{initFormConfig:M,updateFieldConfig:b}=oe({tableId:R,getOriginalSchema:k,formOptions:o,tableApi:r});M();const[_,a]=w({connectedComponent:ie}),[h,T]=w({connectedComponent:ae}),[O,x]=w({connectedComponent:te});function B(){x.setData({}),x.open()}function N(){a.setData({}),a.open()}function z(t){return g(this,null,function*(){T.setData({id:t.id}),T.open()})}function I(t){return g(this,null,function*(){a.setData({id:t.id}),a.open()})}function L(t){return g(this,null,function*(){yield V(t.id),yield r.query()})}function U(){const m=r.grid.getCheckboxRecords().map(l=>l.id);J.confirm({title:"提示",okType:"danger",content:`确认删除选中的${m.length}条记录吗？`,onOk:()=>g(null,null,function*(){yield V(m),yield r.query()})})}function W(){ne(ee,"生产异常响应记录数据",r.formApi.form.values,{fieldMappingTime:o.fieldMappingTime})}return(t,m)=>{const l=P("a-button"),v=P("ghost-button"),u=pe("access");return f(),c(n(se),{"auto-content-height":!0},{default:i(()=>[p(n(D),{"table-title":"生产异常响应记录列表"},{"expand-before":i(()=>[p(l,{type:"text",onClick:B},{default:i(()=>[p(n(re))]),_:1})]),"toolbar-tools":i(()=>[p(n(q),null,{default:i(()=>[C((f(),c(l,{onClick:W},{default:i(()=>[y(Y(t.$t("pages.common.export")),1)]),_:1})),[[u,["mes:proAnomalyResponse:export"],"code"]]),C((f(),c(l,{disabled:!n(K)(n(r)),danger:"",type:"primary",onClick:U},{default:i(()=>[y(Y(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[u,["mes:proAnomalyResponse:remove"],"code"]]),C((f(),c(l,{type:"primary",onClick:N},{default:i(()=>[y(Y(t.$t("pages.common.add")),1)]),_:1})),[[u,["mes:proAnomalyResponse:add"],"code"]])]),_:1})]),action:i(({row:d})=>[p(n(q),null,{default:i(()=>[C((f(),c(v,{onClick:A($=>z(d),["stop"])},{default:i(()=>[y(Y(t.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyResponse:view"],"code"]]),C((f(),c(v,{onClick:A($=>I(d),["stop"])},{default:i(()=>[y(Y(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyResponse:edit"],"code"]]),p(n(de),{"get-popup-container":n(ce),placement:"left",title:"确认删除？",onConfirm:$=>L(d)},{default:i(()=>[C((f(),c(v,{danger:"",onClick:m[0]||(m[0]=A(()=>{},["stop"]))},{default:i(()=>[y(Y(t.$t("pages.common.delete")),1)]),_:1})),[[u,["mes:proAnomalyResponse:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),p(n(_),{onReload:m[1]||(m[1]=d=>n(r).query())}),p(n(h)),p(n(O),{"table-id":R,schema:n(k)(),onUpdateFieldConfig:n(b)},null,8,["schema","onUpdateFieldConfig"])]),_:1})}}});export{so as default};
