var m=(d,l,t)=>new Promise((r,e)=>{var i=a=>{try{n(t.next(a))}catch(o){e(o)}},s=a=>{try{n(t.throw(a))}catch(o){e(o)}},n=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);n((t=t.apply(d,l)).next())});import{u}from"./form-DcAycvJX.js";import{w as p}from"./index-BCj7hz3q.js";import{as as w}from"./bootstrap-CbEyMBZc.js";import{d as _,h,o as C,w as b,a as g,b as f}from"../jse/index-index-CKHiV3bJ.js";import{u as v}from"./use-modal-BtBQhM0d.js";const D=_({__name:"instance-invalid-modal",emits:["reload"],setup(d,{emit:l}){const t=l,[r,e]=v({onConfirm:a,onCancel:n,fullscreenButton:!1,title:"作废原因"}),[i,s]=u({commonConfig:{formItemClass:"col-span-2",componentProps:{class:"w-full"},labelWidth:80},layout:"vertical",schema:[{fieldName:"comment",label:"作废原因",component:"Textarea"}],showDefaultActions:!1,wrapperClass:"grid-cols-2"});function n(){return m(this,null,function*(){e.close(),yield s.resetForm()})}function a(){return m(this,null,function*(){try{e.modalLoading(!0);const{valid:o}=yield s.validate();if(!o)return;const c=w(yield s.getValues());c.id=e.getData().id,yield p(c),t("reload"),n()}catch(o){console.error(o)}finally{e.modalLoading(!1)}})}return(o,c)=>(C(),h(f(r),null,{default:b(()=>[g(f(i))]),_:1}))}});export{D as _};
