var j=Object.defineProperty;var V=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var q=(m,e,o)=>e in m?j(m,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[e]=o,P=(m,e)=>{for(var o in e||(e={}))G.call(e,o)&&q(m,o,e[o]);if(V)for(var o of V(e))H.call(e,o)&&q(m,o,e[o]);return m};var g=(m,e,o)=>new Promise((b,r)=>{var k=a=>{try{_(o.next(a))}catch(h){r(h)}},w=a=>{try{_(o.throw(a))}catch(h){r(h)}},_=a=>a.done?b(a.value):Promise.resolve(a.value).then(k,w);_((o=o.apply(m,e)).next())});import{aq as D,al as J}from"./bootstrap-CbEyMBZc.js";import{v as K,a as Q}from"./vxe-table-5UTMlFMN.js";import{q as E,c as X,e as Z,f as S,g as oo}from"./data-buGGC9Vu.js";import{u as eo,_ as to}from"./useFieldConfig-CEaS09tt.js";import{c as io}from"./download-BL_xY_mD.js";import{_ as no}from"./proAnomalyEvent-modal.vue_vue_type_script_setup_true_lang-CBQ9joVR.js";import{_ as ao}from"./proAnomalyEvent-view-modal.vue_vue_type_script_setup_true_lang-WmcmaCx4.js";import Y from"./index-Yd03BW_o.js";import{F as ro}from"./FilterOutlined-Dm1qpLE1.js";import{_ as mo}from"./page.vue_vue_type_script_setup_true_lang-C6V6VPKH.js";import{d as po,l as O,V as so,h as c,o as f,w as n,a as s,b as i,W as C,k as v,t as y}from"../jse/index-index-CKHiV3bJ.js";import{u as lo}from"./use-vxe-grid-jJsowVf7.js";import{u as x}from"./use-modal-BtBQhM0d.js";import{P as co}from"./index-Bf3KtG2n.js";import{g as fo}from"./get-popup-container-P4S1sr5h.js";import"./form-DcAycvJX.js";import"./use-vben-form-CDDuv56b.js";import"./index-C0ExvxMt.js";import"./checkbox.vue_vue_type_script_setup_true_lang-53DrAgf8.js";import"./render-content.vue_vue_type_script_lang-h-IJYrAt.js";import"./init-5GXIIGpx.js";import"./index-CUsW12bK.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-D2uSfO0F.js";import"./helper-CgBacOxF.js";import"./useSysUserSelect-F1t7eIpS.js";import"./index-CoycSe17.js";import"./dict-LWP2femj.js";import"./render-C2mFGEaj.js";import"./index-cCfXrJ1Q.js";import"./index-BLUHc0Mr.js";import"./data-CsrVBQ4i.js";import"./index-D7oCs85i.js";import"./index-BQy1gs98.js";import"./json-preview.vue_vue_type_style_index_0_lang-D-h_IPZe.js";import"./vuedraggable.umd-Cwsj9bYW.js";import"./index-1qAxlhJj.js";import"./Checkbox-CpVw4yVS.js";import"./index-CKqqy29x.js";import"./useDescription-B6kfVHGc.js";import"./index-vRRmcGk_.js";import"./index-BPV6pKaP.js";import"./index-65hk_V-f.js";import"./index-CQDwpHx9.js";import"./shallowequal-BSzQCceG.js";import"./uniq-DFnFScdj.js";import"./Overflow-1mM_ifyS.js";import"./index-B4Ee8RY3.js";import"./slide-BYSN4a27.js";import"./Dropdown-CEQGVhtH.js";import"./pick-DDCWWYz_.js";import"./isMobile-8sZ0LT6r.js";import"./index-Bn5n5c2e.js";import"./x-C_lPlK2i.js";import"./index-7E7RpNGb.js";const M="mes-proAnomalyEvent-index",Ce=po({__name:"index",setup(m){const e={collapsed:!0,commonConfig:{labelWidth:80,componentProps:{allowClear:!0}},schema:E(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",fieldMappingTime:[["discoveryTime",["params[beginDiscoveryTime]","params[endDiscoveryTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:X,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(A,...u)=>g(null,[A,...u],function*({page:t,sorts:p},l={}){const d=P({pageNum:t.currentPage,pageSize:t.pageSize},l);return Q(d,p),yield Z(d)})}},rowConfig:{keyField:"id"},sortConfig:{remote:!0,multiple:!1},id:M},[b,r]=lo({formOptions:e,gridOptions:o,gridEvents:{sortChange:()=>r.query()}}),{initFormConfig:k,updateFieldConfig:w}=eo({tableId:M,getOriginalSchema:E,formOptions:e,tableApi:r});k();const[_,a]=x({connectedComponent:no}),[h,$]=x({connectedComponent:ao}),[B,F]=x({connectedComponent:to});function N(){F.setData({}),F.open()}function R(){a.setData({}),a.open()}function z(t){return g(this,null,function*(){$.setData({id:t.id}),$.open()})}function I(t){return g(this,null,function*(){a.setData({id:t.id}),a.open()})}function L(t){return g(this,null,function*(){yield S(t.id),yield r.query()})}function U(){const p=r.grid.getCheckboxRecords().map(l=>l.id);J.confirm({title:"提示",okType:"danger",content:`确认删除选中的${p.length}条记录吗？`,onOk:()=>g(null,null,function*(){yield S(p),yield r.query()})})}function W(){io(oo,"生产异常事件数据",r.formApi.form.values,{fieldMappingTime:e.fieldMappingTime})}return(t,p)=>{const l=O("a-button"),A=O("ghost-button"),u=so("access");return f(),c(i(mo),{"auto-content-height":!0},{default:n(()=>[s(i(b),{"table-title":"生产异常事件列表"},{"expand-before":n(()=>[s(l,{type:"text",onClick:N},{default:n(()=>[s(i(ro))]),_:1})]),"toolbar-tools":n(()=>[s(i(Y),null,{default:n(()=>[C((f(),c(l,{onClick:W},{default:n(()=>[v(y(t.$t("pages.common.export")),1)]),_:1})),[[u,["mes:proAnomalyEvent:export"],"code"]]),C((f(),c(l,{disabled:!i(K)(i(r)),danger:"",type:"primary",onClick:U},{default:n(()=>[v(y(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[u,["mes:proAnomalyEvent:remove"],"code"]]),C((f(),c(l,{type:"primary",onClick:R},{default:n(()=>[v(y(t.$t("pages.common.add")),1)]),_:1})),[[u,["mes:proAnomalyEvent:add"],"code"]])]),_:1})]),action:n(({row:d})=>[s(i(Y),null,{default:n(()=>[C((f(),c(A,{onClick:D(T=>z(d),["stop"])},{default:n(()=>[v(y(t.$t("pages.common.view")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyEvent:view"],"code"]]),C((f(),c(A,{onClick:D(T=>I(d),["stop"])},{default:n(()=>[v(y(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[u,["mes:proAnomalyEvent:edit"],"code"]]),s(i(co),{"get-popup-container":i(fo),placement:"left",title:"确认删除？",onConfirm:T=>L(d)},{default:n(()=>[C((f(),c(A,{danger:"",onClick:p[0]||(p[0]=D(()=>{},["stop"]))},{default:n(()=>[v(y(t.$t("pages.common.delete")),1)]),_:1})),[[u,["mes:proAnomalyEvent:remove"],"code"]])]),_:2},1032,["get-popup-container","onConfirm"])]),_:2},1024)]),_:1}),s(i(_),{onReload:p[1]||(p[1]=d=>i(r).query())}),s(i(h)),s(i(B),{"table-id":M,schema:i(E)(),onUpdateFieldConfig:i(w)},null,8,["schema","onUpdateFieldConfig"])]),_:1})}}});export{Ce as default};
